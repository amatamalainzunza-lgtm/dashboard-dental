<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Clínicas Dentales - Concepción</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .icon { width: 24px; height: 24px; display: inline-block; }
        .icon-small { width: 16px; height: 16px; display: inline-block; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const Star = ({ size = 24, className = "" }) => (
            <svg className={`icon ${size === 14 ? 'icon-small' : ''} ${className}`} fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
        );
        
        const Eye = ({ size = 24, className = "" }) => (
            <svg className={`icon ${size === 16 ? 'icon-small' : ''} ${className}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
        );
        
        const Award = ({ className = "" }) => (
            <svg className={`icon ${className}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="8" r="7"/>
                <polyline points="8.21,13.89 7,23 12,20 17,23 15.79,13.88"/>
            </svg>
        );
        
        const Users = ({ className = "" }) => (
            <svg className={`icon ${className}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
        );
        
        const TrendingUp = ({ className = "" }) => (
            <svg className={`icon ${className}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/>
                <polyline points="17,6 23,6 23,12"/>
            </svg>
        );

        const Dashboard = () => {
          const [selectedClinic, setSelectedClinic] = React.useState(null);
          const [showReportModal, setShowReportModal] = React.useState(false);
          const [showContactForm, setShowContactForm] = React.useState(false);
          const [reportType, setReportType] = React.useState('');
          const [currentPage, setCurrentPage] = React.useState(1);
          const [contactData, setContactData] = React.useState({
            name: '',
            email: '',
            whatsapp: '',
            clinicName: ''
          });
          
          const itemsPerPage = 10;

          const clinicsData = [
            { id: 1, name: "Clínica Dental San Martín", rating: 5.0, reviews: 104, score: 4.885, rank: 1, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "San Martín 450, Concepción" },
            { id: 2, name: "Clínica Bio Bio Dental", rating: 5.0, reviews: 98, score: 4.879, rank: 2, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 20:00", sabado: "09:00 - 20:00", direccion: "O'Higgins Poniente 77, Torre Futuro" },
            { id: 3, name: "Clínica Dental Brelo", rating: 4.9, reviews: 226, score: 4.851, rank: 3, acceso: true, familia: true, ortodoncia: true, urgencias: true, horario: "09:00 - 19:30", sabado: "09:00 - 14:00", direccion: "Cochrane 844, Of. 1103" },
            { id: 4, name: "Dra. Gabi Ibáñez", rating: 5.0, reviews: 51, score: 4.803, rank: 4, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Lincoyán 444, Of. 313" },
            { id: 5, name: "Münzenmayer Odontología", rating: 5.0, reviews: 50, score: 4.800, rank: 5, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "09:30 - 19:00", sabado: "cerrado", direccion: "Anibal Pinto 131, Concepción" },
            { id: 6, name: "CentroDent", rating: 4.9, reviews: 99, score: 4.799, rank: 6, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:30 - 17:30", sabado: "cerrado", direccion: "Rengo 193, 2º piso" },
            { id: 7, name: "Hola Dental Concepción", rating: 4.9, reviews: 92, score: 4.793, rank: 7, acceso: true, familia: false, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Tucapel 240, Concepción" },
            { id: 8, name: "KAI Estudio Dental", rating: 5.0, reviews: 47, score: 4.792, rank: 8, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "09:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Rengo 94, oficina 51" },
            { id: 9, name: "Dra Carolina Weason", rating: 5.0, reviews: 46, score: 4.789, rank: 9, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "no informado", sabado: "no informado", direccion: "Lord Cochrane 815" },
            { id: 10, name: "Clinica A+ Salud", rating: 5.0, reviews: 43, score: 4.779, rank: 10, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 17:00", direccion: "San Martín 654, Of. 31" },
            { id: 11, name: "VR Clínica dental", rating: 5.0, reviews: 42, score: 4.776, rank: 11, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "no informado", sabado: "no informado", direccion: "Angol 436, Of. 402" },
            { id: 12, name: "Experiencia Bliss", rating: 4.9, reviews: 62, score: 4.755, rank: 12, acceso: false, familia: false, ortodoncia: true, urgencias: true, horario: "09:30 - 20:30", sabado: "10:30 - 14:00", direccion: "Marina de Chile 2889" },
            { id: 13, name: "Clínica Origen", rating: 5.0, reviews: 36, score: 4.753, rank: 13, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Cochrane 635, Torre B" },
            { id: 14, name: "Dr. Pablo Cerda Ortodoncia", rating: 4.9, reviews: 58, score: 4.748, rank: 14, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "Barros Arana 162" },
            { id: 15, name: "ALICURA", rating: 4.8, reviews: 140, score: 4.739, rank: 15, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "08:30 - 19:00", sabado: "09:00 - 14:00", direccion: "Av. O'Higgins 1628" },
            { id: 16, name: "Dra Katherine Adasme", rating: 5.0, reviews: 29, score: 4.719, rank: 16, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 20:00", sabado: "09:00 - 20:00", direccion: "Rengo 94, Oficina 41" },
            { id: 17, name: "Clínica KDENT", rating: 5.0, reviews: 27, score: 4.708, rank: 17, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "O'Higgins 630, Of. 403" },
            { id: 18, name: "Doctor Ortodoncia CDO", rating: 4.9, reviews: 39, score: 4.702, rank: 18, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "Barros Arana 492" },
            { id: 19, name: "Clínica Dental Mood", rating: 5.0, reviews: 25, score: 4.696, rank: 19, acceso: true, familia: true, ortodoncia: true, urgencias: false, horario: "09:00 - 20:00", sabado: "cerrado", direccion: "Cochrane 678" },
            { id: 20, name: "Clínica Valinor", rating: 5.0, reviews: 23, score: 4.683, rank: 20, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "09:00 - 20:00", sabado: "09:00 - 14:00", direccion: "Barros Arana 1098" }
          ];

          const handleContactSubmit = async (e) => {
            if (e) e.preventDefault();
            
            if (!contactData.name || !contactData.email || !contactData.whatsapp) {
              alert('Por favor completa todos los campos obligatorios.');
              return;
            }
            
            try {
              const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyJMrK-cqWbo_bV5lTZloELoLIIqxdkzESTZZc2xfVFSATACIoTRRdELuaEnukVpmdP/exec';
              
              const payload = {
                name: contactData.name,
                email: contactData.email,
                whatsapp: contactData.whatsapp,
                clinicName: contactData.clinicName,
                reportType: reportType,
                source: 'dashboard-hostinger'
              };
              
              alert('Enviando solicitud... Por favor espera.');
              
              await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
              });
              
              alert(`¡Solicitud enviada exitosamente!\n\nRecibirás tu ${reportType === 'lite' ? 'Informe Lite' : 'Informe Completo'} en las próximas 24 horas.\n\nTe contactaremos al WhatsApp: ${contactData.whatsapp}`);
              
              setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
              setShowContactForm(false);
              setReportType('');
              
            } catch (error) {
              alert(`Error al enviar la solicitud: ${error.message}`);
            }
          };

          const getRankColor = (rank) => {
            if (rank === 1) return 'bg-yellow-500';
            if (rank === 2) return 'bg-gray-400';
            if (rank === 3) return 'bg-amber-600';
            if (rank <= 10) return 'bg-blue-500';
            return 'bg-slate-400';
          };

          const renderStars = (rating) => {
            return Array.from({ length: 5 }, (_, i) => (
              <Star key={i} size={14} className={i < rating ? 'text-yellow-400 fill-current' : 'text-gray-300'} />
            ));
          };

          const getSpecialtyClinics = (specialty) => {
            return clinicsData.filter(clinic => clinic[specialty]).sort((a, b) => b.score - a.score);
          };

          const paginateData = (data, page) => {
            const startIndex = (page - 1) * itemsPerPage;
            return data.slice(startIndex, startIndex + itemsPerPage);
          };

          const getTotalPages = (dataLength) => {
            return Math.ceil(dataLength / itemsPerPage);
          };

          const paginatedClinics = paginateData(clinicsData, currentPage);
          const totalPages = getTotalPages(clinicsData.length);

          const accesoUniversalClinics = getSpecialtyClinics('acceso');
          const atencionFamiliarClinics = getSpecialtyClinics('familia');
          const ortodonciaClinics = getSpecialtyClinics('ortodoncia');
          const urgenciasClinics = getSpecialtyClinics('urgencias');

          return (
            <div className="min-h-screen bg-gray-50">
              <div className="bg-gradient-to-r from-blue-600 to-blue-800 text-white">
                <div className="max-w-7xl mx-auto px-4 py-12">
                  <div className="text-center">
                    <h1 className="text-4xl md:text-5xl font-bold mb-4">
                      Ranking Clínicas Dentales de Concepción
                    </h1>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto mb-8">
                      <div className="bg-blue-700 bg-opacity-50 rounded-lg p-4">
                        <p className="text-sm text-blue-100">Fecha de corte</p>
                        <p className="text-xl font-bold">21/08/2025</p>
                      </div>
                      <div className="bg-blue-700 bg-opacity-50 rounded-lg p-4">
                        <p className="text-sm text-blue-100">Próxima actualización</p>
                        <p className="text-xl font-bold">20/09/2025</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-white border-b">
                <div className="max-w-7xl mx-auto px-4 py-8">
                  <div className="max-w-4xl mx-auto text-center">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">Cómo leer este dashboard</h2>
                    <div className="text-gray-700 leading-relaxed text-lg">
                      <p>
                        Este dashboard muestra las <strong>20 clínicas mejor evaluadas de Concepción</strong> (de 160). 
                        El orden se basa en reseñas públicas de Google Maps, ajustadas con un <strong>método bayesiano</strong> que 
                        corrige diferencias en cantidad de valoraciones. Explora <strong>mini-listas</strong> (ortodoncia, pediatría, acceso universal). 
                        También podrás encontrar <strong>direcciones, horarios</strong> y si atienden <strong>sábado, domingo o urgencias</strong>, 
                        además de opciones para <strong>verificar información oficial</strong> o <strong>avisarnos de un error</strong>. 
                        Los datos se <strong>actualizan 2 veces al mes</strong> por lo que la información estará siempre fresca para que 
                        tomes las mejores decisiones; úsalo como referencia y confirma horarios/servicios directamente con la clínica.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="max-w-7xl mx-auto px-4 py-8">
                <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                  <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center">
                      <Award className="h-8 w-8 text-blue-500" />
                      <div className="ml-4">
                        <p className="text-sm text-gray-500">Total Clínicas</p>
                        <p className="text-2xl font-bold">159</p>
                      </div>
                    </div>
                  </div>
                  <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center">
                      <Users className="h-8 w-8 text-green-500" />
                      <div className="ml-4">
                        <p className="text-sm text-gray-500">Promedio Reviews</p>
                        <p className="text-2xl font-bold">67</p>
                      </div>
                    </div>
                  </div>
                  <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center">
                      <Star className="h-8 w-8 text-yellow-500" />
                      <div className="ml-4">
                        <p className="text-sm text-gray-500">Rating Promedio</p>
                        <p className="text-2xl font-bold">4.9</p>
                      </div>
                    </div>
                  </div>
                  <div className="bg-white rounded-lg shadow p-6">
                    <div className="flex items-center">
                      <TrendingUp className="h-8 w-8 text-purple-500" />
                      <div className="ml-4">
                        <p className="text-sm text-gray-500">Score Promedio</p>
                        <p className="text-2xl font-bold">4.756</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="bg-white rounded-lg shadow overflow-hidden mb-8">
                  <div className="bg-blue-600 px-6 py-4">
                    <h2 className="text-xl font-bold text-white">TOP 20 Clínicas Dentales</h2>
                    <p className="text-blue-100 text-sm">Ranking basado en Bayesian Score</p>
                  </div>
                  
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead className="bg-gray-50">
                        <tr>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rank</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Clínica</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rating</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Reviews</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Score</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Acciones</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-200">
                        {clinicsData.map((clinic) => (
                          <tr key={clinic.id} className="hover:bg-gray-50">
                            <td className="px-6 py-4">
                              <div className={`w-8 h-8 rounded-full text-white text-sm font-bold flex items-center justify-center ${getRankColor(clinic.rank)}`}>
                                {clinic.rank}
                              </div>
                            </td>
                            <td className="px-6 py-4">
                              <div>
                                <div className="text-sm font-medium text-gray-900">{clinic.name}</div>
                                <div className="flex items-center mt-1">
                                  {renderStars(clinic.rating)}
                                </div>
                              </div>
                            </td>
                            <td className="px-6 py-4">
                              <div className="text-sm font-bold text-green-600">{clinic.rating.toFixed(1)}</div>
                            </td>
                            <td className="px-6 py-4">
                              <div className="text-sm text-gray-900">{clinic.reviews}</div>
                            </td>
                            <td className="px-6 py-4">
                              <div className="text-sm font-bold text-purple-600">{clinic.score.toFixed(3)}</div>
                            </td>
                            <td className="px-6 py-4">
                              <button 
                                onClick={() => setSelectedClinic(clinic)}
                                className="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center"
                              >
                                <Eye size={16} className="mr-1" /> Ver
                              </button>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>

                <div className="mb-8">
                  <div className="text-center mb-6">
                    <h2 className="text-2xl font-bold text-gray-800 mb-2">Especialidades</h2>
                    <p className="text-gray-600">Las mejores clínicas por especialidad</p>
                  </div>
                  
                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div className="bg-white rounded-lg shadow">
                      <div className="bg-blue-500 px-4 py-3 rounded-t-lg">
                        <div className="flex justify-between items-center">
                          <h3 className="text-white font-bold">♿ Acceso Universal</h3>
                          <span className="text-white text-sm bg-blue-700 px-2 py-1 rounded">
                            {accesoUniversalClinics.length} clínicas
                          </span>
                        </div>
                      </div>
                      <div className="p-4 max-h-80 overflow-y-auto">
                        {accesoUniversalClinics.map((clinic, idx) => (
                          <div key={clinic.id} className="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
                            <div className="flex items-center">
                              <div className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">
                                {idx + 1}
                              </div>
                              <div>
                                <div className="text-sm font-medium">{clinic.name}</div>
                                <div className="flex items-center">
                                  {renderStars(clinic.rating)}
                                  <span className="ml-1 text-xs text-gray-500">({clinic.reviews})</span>
                                </div>
                              </div>
                            </div>
                            <div className="text-sm font-bold text-purple-600">{clinic.score.toFixed(2)}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow">
                      <div className="bg-green-500 px-4 py-3 rounded-t-lg">
                        <div className="flex justify-between items-center">
                          <h3 className="text-white font-bold">👨‍👩‍👧‍👦 Atención Familiar</h3>
                          <span className="text-white text-sm bg-green-700 px-2 py-1 rounded">
                            {atencionFamiliarClinics.length} clínicas
                          </span>
                        </div>
                      </div>
                      <div className="p-4 max-h-80 overflow-y-auto">
                        {atencionFamiliarClinics.map((clinic, idx) => (
                          <div key={clinic.id} className="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
                            <div className="flex items-center">
                              <div className="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">
                                {idx + 1}
                              </div>
                              <div>
                                <div className="text-sm font-medium">{clinic.name}</div>
                                <div className="flex items-center">
                                  {renderStars(clinic.rating)}
                                  <span className="ml-1 text-xs text-gray-500">({clinic.reviews})</span>
                                </div>
                              </div>
                            </div>
                            <div className="text-sm font-bold text-purple-600">{clinic.score.toFixed(2)}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow">
                      <div className="bg-purple-500 px-4 py-3 rounded-t-lg">
                        <div className="flex justify-between items-center">
                          <h3 className="text-white font-bold">🦷 Ortodoncia</h3>
                          <span className="text-white text-sm bg-purple-700 px-2 py-1 rounded">
                            {ortodonciaClinics.length} clínicas
                          </span>
                        </div>
                      </div>
                      <div className="p-4 max-h-80 overflow-y-auto">
                        {ortodonciaClinics.map((clinic, idx) => (
                          <div key={clinic.id} className="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
                            <div className="flex items-center">
                              <div className="w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">
                                {idx + 1}
                              </div>
                              <div>
                                <div className="text-sm font-medium">{clinic.name}</div>
                                <div className="flex items-center">
                                  {renderStars(clinic.rating)}
                                  <span className="ml-1 text-xs text-gray-500">({clinic.reviews})</span>
                                </div>
                              </div>
                            </div>
                            <div className="text-sm font-bold text-purple-600">{clinic.score.toFixed(2)}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow">
                      <div className="bg-red-500 px-4 py-3 rounded-t-lg">
                        <div className="flex justify-between items-center">
                          <h3 className="text-white font-bold">🚨 Atención de Urgencias</h3>
                          <span className="text-white text-sm bg-red-700 px-2 py-1 rounded">
                            {urgenciasClinics.length} clínicas
                          </span>
                        </div>
                      </div>
                      <div className="p-4 max-h-80 overflow-y-auto">
                        {urgenciasClinics.map((clinic, idx) => (
                          <div key={clinic.id} className="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
                            <div className="flex items-center">
                              <div className="w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">
                                {idx + 1}
                              </div>
                              <div>
                                <div className="text-sm font-medium">{clinic.name}</div>
                                <div className="flex items-center">
                                  {renderStars(clinic.rating)}
                                  <span className="ml-1 text-xs text-gray-500">({clinic.reviews})</span>
                                </div>
                              </div>
                            </div>
                            <div className="text-sm font-bold text-purple-600">{clinic.score.toFixed(2)}</div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>

                <div className="bg-white rounded-lg shadow overflow-hidden mb-8">
                  <div className="bg-green-600 px-6 py-4">
                    <div className="flex justify-between items-center">
                      <div>
                        <h3 className="text-xl font-bold text-white">📍 Horarios y Ubicaciones</h3>
                        <p className="text-green-100 text-sm">Información completa de las 20 mejores clínicas</p>
                      </div>
                      <span className="bg-green-700 px-3 py-1 rounded text-white text-sm">
                        Página {currentPage} de {totalPages}
                      </span>
                    </div>
                  </div>
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead className="bg-gray-50">
                        <tr>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rank</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Clínica</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">L-V</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sábado</th>
                          <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Dirección</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-200">
                        {paginatedClinics.map((clinic) => (
                          <tr key={clinic.id}>
                            <td className="px-6 py-4">
                              <div className={`w-6 h-6 rounded-full text-white text-xs font-bold flex items-center justify-center ${getRankColor(clinic.rank)}`}>
                                {clinic.rank}
                              </div>
                            </td>
                            <td className="px-6 py-4 text-sm font-medium">{clinic.name}</td>
                            <td className="px-6 py-4 text-sm">{clinic.horario}</td>
                            <td className="px-6 py-4 text-sm">{clinic.sabado}</td>
                            <td className="px-6 py-4 text-sm">{clinic.direccion}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                  
                  <div className="bg-gray-50 px-6 py-3 flex justify-center items-center space-x-4">
                    <button
                      onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}
                      disabled={currentPage === 1}
                      className="px-4 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
                    >
                      Anterior
                    </button>
                    
                    <div className="flex space-x-1">
                      {Array.from({ length: totalPages }, (_, i) => i + 1).map((pageNum) => (
                        <button
                          key={pageNum}
                          onClick={() => setCurrentPage(pageNum)}
                          className={`px-3 py-2 text-sm rounded-md ${
                            currentPage === pageNum
                              ? 'bg-green-600 text-white'
                              : 'border border-gray-300 hover:bg-gray-100'
                          }`}
                        >
                          {pageNum}
                        </button>
                      ))}
                    </div>
                    
                    <button
                      onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}
                      disabled={currentPage === totalPages}
                      className="px-4 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100"
                    >
                      Siguiente
                    </button>
                  </div>
                </div>

                <div className="bg-blue-600 rounded-lg p-8 text-center text-white">
                  <h3 className="text-2xl font-bold mb-4">¿Necesitas más información?</h3>
                  <p className="mb-6">Accede a informes especializados con análisis detallado</p>
                  <div className="flex gap-4 justify-center">
                    <button 
                      onClick={() => { setReportType('lite'); setShowReportModal(true); }}
                      className="bg-white text-blue-600 px-6 py-2 rounded font-semibold"
                    >
                      Informe Lite - $4.999
                    </button>
                    <button 
                      onClick={() => { setReportType('completo'); setShowReportModal(true); }}
                      className="bg-yellow-400 text-gray-900 px-6 py-2 rounded font-semibold"
                    >
                      Informe Completo - $49.999
                    </button>
                  </div>
                </div>
              </div>

              {selectedClinic && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                  <div className="bg-white rounded-lg max-w-lg w-full p-6">
                    <div className="flex justify-between items-start mb-4">
                      <h3 className="text-xl font-bold">{selectedClinic.name}</h3>
                      <button onClick={() => setSelectedClinic(null)} className="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                    </div>
                    
                    <div className="space-y-3">
                      <div className="flex items-center">
                        {renderStars(selectedClinic.rating)}
                        <span className="ml-2">{selectedClinic.rating}/5.0 ({selectedClinic.reviews} reviews)</span>
                      </div>
                      
                      <div className="grid grid-cols-2 gap-4 text-sm">
                        <div>
                          <p className="font-medium">Bayesian Score:</p>
                          <p className="text-purple-600 font-bold">{selectedClinic.score.toFixed(3)}</p>
                        </div>
                        <div>
                          <p className="font-medium">Posición:</p>
                          <p className="font-bold">#{selectedClinic.rank} de 159</p>
                        </div>
                        <div>
                          <p className="font-medium">Horario L-V:</p>
                          <p>{selectedClinic.horario}</p>
                        </div>
                        <div>
                          <p className="font-medium">Sábados:</p>
                          <p>{selectedClinic.sabado}</p>
                        </div>
                      </div>
                      
                      <div>
                        <p className="font-medium text-sm">Dirección:</p>
                        <p className="text-sm text-gray-600">{selectedClinic.direccion}</p>
                      </div>
                      
                      <div className="flex gap-2 pt-4">
                        <button 
                          onClick={() => { setReportType('lite'); setShowReportModal(true); setSelectedClinic(null); }}
                          className="bg-blue-600 text-white px-4 py-2 rounded text-sm"
                        >
                          Informe Lite
                        </button>
                        <button 
                          onClick={() => { setReportType('completo'); setShowReportModal(true); setSelectedClinic(null); }}
                          className="bg-indigo-600 text-white px-4 py-2 rounded text-sm"
                        >
                          Informe Completo
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {showReportModal && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                  <div className="bg-white rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto">
                    <div className="text-center">
                      <h3 className="text-xl font-bold mb-2">
                        {reportType === 'lite' ? 'Informe Lite' : 'Informe Completo'}
                      </h3>
                      <div className="text-3xl font-bold mb-4">
                        {reportType === 'lite' ? '$4.999' : '$49.999'}
                      </div>
                      
                      {reportType === 'lite' && (
                        <div className="text-left mb-6 p-4 bg-blue-50 rounded-lg">
                          <p className="text-sm text-gray-700 leading-relaxed">
                            <strong>Obtén un análisis detallado de la clínica que piensas elegir.</strong>
                          </p>
                          <div className="mt-3">
                            <p className="text-sm font-medium text-gray-800 mb-2">El informe incluye:</p>
                            <ul className="text-sm text-gray-700 space-y-1 ml-4">
                              <li>• Su posición dentro de las 160 clínicas de Concepción</li>
                              <li>• Comparación con el promedio del mercado</li>
                              <li>• Revisión de reclamos y reseñas recientes</li>
                              <li>• Indicadores de confianza</li>
                            </ul>
                          </div>
                          <p className="text-sm text-gray-600 mt-4 italic">
                            Si estás de acuerdo, por favor déjanos tu información para ponernos en contacto.
                          </p>
                        </div>
                      )}
                      
                      {reportType === 'completo' && (
                        <div className="text-left mb-6 p-4 bg-purple-50 rounded-lg">
                          <p className="text-sm text-gray-700 leading-relaxed">
                            <strong>Obtén un diagnóstico completo para mejorar tu reputación y captar más pacientes.</strong>
                          </p>
                          <div className="mt-3">
                            <p className="text-sm font-medium text-gray-800 mb-2">El informe incluye:</p>
                            <ul className="text-sm text-gray-700 space-y-1 ml-4">
                              <li>• <strong>Posición en el ranking de Concepción (#/160)</strong> y <strong>percentil</strong> del mercado.</li>
                              <li>• <strong>Benchmark</strong>: brecha vs <strong>Top 10</strong> y vs tus <strong>5 pares inmediatos</strong> (arriba/abajo).</li>
                              <li>• <strong>Tendencia quincenal</strong>: score bayesiano y número de reseñas.</li>
                              <li>• <strong>Voz del paciente (90 días)</strong>: temas recurrentes, ejemplos curados e <strong>incidencia negativa x100</strong>.</li>
                              <li>• <strong>Mapa de oportunidades</strong> priorizado (frecuencia × gravedad × recencia).</li>
                              <li>• <strong>Competitividad horaria y accesos</strong> (pediatría, ortodoncia, acceso universal).</li>
                              <li>• <strong>Señales externas</strong>: Reclamos.cl, Doctoralia/AgendaPro y acreditación (si aplica).</li>
                              <li>• <strong>Plan de acción 90 días</strong> con 3–6 medidas, responsables sugeridos e indicadores de éxito.</li>
                            </ul>
                          </div>
                          <p className="text-sm text-gray-600 mt-4 italic">
                            Si estás de acuerdo, por favor déjanos tu información para ponernos en contacto.
                          </p>
                        </div>
                      )}
                      
                      <button 
                        onClick={() => {
                          setShowReportModal(false);
                          setShowContactForm(true);
                          if (selectedClinic) {
                            setContactData({ name: '', email: '', whatsapp: '', clinicName: selectedClinic.name });
                          } else {
                            setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
                          }
                        }}
                        className={`w-full py-3 rounded font-bold text-white mb-3 ${
                          reportType === 'lite' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-indigo-600 hover:bg-indigo-700'
                        } transition-colors`}
                      >
                        Solicitar {reportType === 'lite' ? 'Informe Lite' : 'Informe Completo'}
                      </button>
                      
                      <button 
                        onClick={() => setShowReportModal(false)}
                        className="w-full py-2 text-gray-600 hover:text-gray-800"
                      >
                        Cancelar
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {showContactForm && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                  <div className="bg-white rounded-lg max-w-md w-full p-6">
                    <div className="text-center mb-4">
                      <h3 className="text-xl font-bold">Solicitar {reportType === 'lite' ? 'Informe Lite' : 'Informe Completo'}</h3>
                      <p className="text-sm text-gray-600">
                        {reportType === 'lite' ? '$4.999' : '$49.999'} CLP
                      </p>
                    </div>
                    
                    <form onSubmit={handleContactSubmit} className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Nombre completo *
                        </label>
                        <input
                          type="text"
                          required
                          value={contactData.name}
                          onChange={(e) => setContactData(prev => ({ ...prev, name: e.target.value }))}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="Tu nombre completo"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Email *
                        </label>
                        <input
                          type="email"
                          required
                          value={contactData.email}
                          onChange={(e) => setContactData(prev => ({ ...prev, email: e.target.value }))}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="tu@email.com"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          WhatsApp *
                        </label>
                        <input
                          type="tel"
                          required
                          value={contactData.whatsapp}
                          onChange={(e) => setContactData(prev => ({ ...prev, whatsapp: e.target.value }))}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="+56 9 1234 5678"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Clínica de interés
                        </label>
                        <input
                          type="text"
                          value={contactData.clinicName}
                          onChange={(e) => setContactData(prev => ({ ...prev, clinicName: e.target.value }))}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="¿Sobre qué clínica quieres el informe?"
                        />
                      </div>
                      
                      <div className="flex gap-3 pt-4">
                        <button
                          type="submit"
                          className={`flex-1 py-3 rounded font-bold text-white ${
                            reportType === 'lite' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-indigo-600 hover:bg-indigo-700'
                          } transition-colors`}
                        >
                          Enviar Solicitud
                        </button>
                        <button
                          type="button"
                          onClick={() => {
                            setShowContactForm(false);
                            setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
                          }}
                          className="flex-1 py-3 border border-gray-300 rounded font-medium text-gray-700 hover:bg-gray-50 transition-colors"
                        >
                          Cancelar
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              )}
            </div>
          );
        };

        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>
</body>
</html>