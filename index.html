<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking Cl√≠nicas Dentales Concepci√≥n</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif;
        }
        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* ESTILOS PARA HUELLA DIGITAL */
        .huella-container {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
        .huella-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 40px 30px;
            text-align: center;
        }
        .huella-header h1 {
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .huella-header .subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 300;
        }
        .rank-badge {
            display: inline-block;
            background: #fbbf24;
            color: #1f2937;
            font-size: 56px;
            font-weight: 900;
            padding: 20px 35px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        .huella-content {
            padding: 40px;
        }
        .huella-section {
            margin-bottom: 30px;
        }
        .section-title {
            font-size: 22px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 3px solid #667eea;
            display: inline-block;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-color: #667eea;
        }
        .metric-value {
            font-size: 36px;
            font-weight: 900;
            color: #667eea;
            margin-bottom: 5px;
        }
        .metric-label {
            font-size: 14px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .insight-box {
            background: #ecfdf5;
            border-left: 5px solid #10b981;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .insight-box.warning {
            background: #fef3c7;
            border-left-color: #f59e0b;
        }
        .insight-box.alert {
            background: #fee2e2;
            border-left-color: #ef4444;
        }
        .insight-title {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 8px;
            color: #1f2937;
        }
        .insight-text {
            color: #374151;
            font-size: 15px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e5e7eb;
        }
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        .comparison-table tr:hover {
            background: #f9fafb;
        }
        .highlight-you {
            background: #fef3c7 !important;
            font-weight: 700;
        }
        .cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
        }
        .cta-section h3 {
            font-size: 24px;
            margin-bottom: 15px;
        }
        .cta-button {
            display: inline-block;
            background: white;
            color: #667eea;
            padding: 15px 40px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            font-size: 18px;
            margin-top: 15px;
            transition: all 0.3s;
        }
        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        .huella-footer {
            background: #f9fafb;
            padding: 20px;
            text-align: center;
            font-size: 13px;
            color: #6b7280;
            border-top: 1px solid #e5e7eb;
        }
        .emoji-large {
            font-size: 48px;
            display: block;
            margin: 0 auto 15px;
        }
        
        @media (max-width: 768px) {
            .huella-header h1 {
                font-size: 24px;
            }
            .huella-header .subtitle {
                font-size: 16px;
            }
            .rank-badge {
                font-size: 42px;
                padding: 15px 25px;
            }
            .huella-content {
                padding: 25px;
            }
            .section-title {
                font-size: 18px;
            }
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            .metric-value {
                font-size: 28px;
            }
            .comparison-table {
                font-size: 14px;
            }
            .comparison-table th,
            .comparison-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function Dashboard() {
            const [clinics, setClinics] = useState([]);
            const [filteredClinics, setFilteredClinics] = useState([]);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [currentPage, setCurrentPage] = useState(1);
            const [showClinicModal, setShowClinicModal] = useState(false);
            const [selectedClinic, setSelectedClinic] = useState(null);
            const [showContactForm, setShowContactForm] = useState(false);
            const [reportType, setReportType] = useState('');
            const [contactData, setContactData] = useState({
                name: '',
                email: '',
                whatsapp: '',
                clinicName: ''
            });
            const [showHuellaDigital, setShowHuellaDigital] = useState(false);
            const [huellaClinic, setHuellaClinic] = useState(null);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const itemsPerPage = 10;

            // Deep linking: detectar hash en URL y abrir modal autom√°ticamente
            useEffect(() => {
                const hash = window.location.hash;
                if (hash && hash.startsWith('#clinica-')) {
                    const rankNumber = parseInt(hash.replace('#clinica-', ''));
                    const clinic = clinicsData.find(c => c.rank === rankNumber);
                    if (clinic && clinic.rank >= 6 && clinic.rank <= 20) {
                        setTimeout(() => {
                            setHuellaClinic(clinic);
                            setShowHuellaDigital(true);
                            // Scroll to top when modal opens
                            window.scrollTo(0, 0);
                            
                            // Track en GoatCounter la apertura de Huella Digital espec√≠fica
                            if (window.goatcounter) {
                                window.goatcounter.count({
                                    path: `/huella-digital/clinica-${rankNumber}`,
                                    title: `Huella Digital - ${clinic.name}`,
                                    event: true
                                });
                            }
                        }, 500); // peque√±o delay para que el dashboard cargue primero
                    }
                }
            }, []);

            const clinicsData = [
                {
                    rank: 1,
                    name: "Cl√≠nica Dental San Mart√≠n",
                    address: "San Mart√≠n 450",
                    rating: 5.0,
                    reviews: 106,
                    bayesianScore: 4.890,
                    change: "same",
                    services: ["accessibility", "orthodontics"],
                    hours: {
                        weekdays: "08:30 - 19:30",
                        saturday: "09:00 - 14:00"
                    }
                },
                {
                    rank: 2,
                    name: "Cl√≠nica Bio Bio Dental",
                    address: "O'Higgins Poniente 77",
                    rating: 5.0,
                    reviews: 99,
                    bayesianScore: 4.884,
                    change: "same",
                    services: [],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "09:00 - 13:00"
                    }
                },
                {
                    rank: 3,
                    name: "Cl√≠nica Dental Brelo - Concepci√≥n",
                    address: "Cochrane 844",
                    rating: 4.9,
                    reviews: 261,
                    bayesianScore: 4.859,
                    change: "same",
                    services: ["accessibility", "family", "orthodontics", "emergency"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "09:00 - 14:00"
                    }
                },
                {
                    rank: 4,
                    name: "Dra. Gabi Ib√°√±ez",
                    address: "Lincoy√°n 444, Of. 313",
                    rating: 5.0,
                    reviews: 60,
                    bayesianScore: 4.833,
                    change: "same",
                    services: ["accessibility"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "09:00 - 13:00"
                    }
                },
                {
                    rank: 5,
                    name: "Dra Carolina Weason",
                    address: "Lord Cochrane 815",
                    rating: 5.0,
                    reviews: 52,
                    bayesianScore: 4.817,
                    change: "up",
                    services: [],
                    hours: {
                        weekdays: "No informado",
                        saturday: "No informado"
                    }
                },
                {
                    rank: 6,
                    name: "M√ºnzenmayer Odontolog√≠a",
                    address: "Anibal Pinto 131",
                    rating: 5.0,
                    reviews: 49,
                    bayesianScore: 4.810,
                    change: "down",
                    services: [],
                    hours: {
                        weekdays: "09:30 - 19:00",
                        saturday: "Cerrado"
                    }
                },
                {
                    rank: 7,
                    name: "CentroDent",
                    address: "Rengo 193, 2¬∫ piso",
                    rating: 4.9,
                    reviews: 104,
                    bayesianScore: 4.810,
                    change: "down",
                    services: ["orthodontics"],
                    hours: {
                        weekdays: "09:30 - 17:30",
                        saturday: "Cerrado"
                    }
                },
                {
                    rank: 8,
                    name: "Clinica A+ Salud",
                    address: "San Mart√≠n 654, Of. 31",
                    rating: 5.0,
                    reviews: 48,
                    bayesianScore: 4.808,
                    change: "up",
                    services: ["accessibility", "orthodontics"],
                    hours: {
                        weekdays: "10:00 - 19:00",
                        saturday: "10:00 - 17:00"
                    }
                },
                {
                    rank: 9,
                    name: "KAI Estudio Dental",
                    address: "Rengo 94, oficina 51",
                    rating: 5.0,
                    reviews: 47,
                    bayesianScore: 4.805,
                    change: "down",
                    services: ["accessibility", "orthodontics", "emergency"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "10:00 - 14:00"
                    }
                },
                {
                    rank: 10,
                    name: "Hola Dental Concepci√≥n",
                    address: "Tucapel 240",
                    rating: 4.9,
                    reviews: 96,
                    bayesianScore: 4.805,
                    change: "down",
                    services: ["accessibility", "emergency"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "09:00 - 13:00"
                    }
                },
                {
                    rank: 11,
                    name: "VR Cl√≠nica dental",
                    address: "Angol 436, Of. 402",
                    rating: 5.0,
                    reviews: 44,
                    bayesianScore: 4.797,
                    change: "same",
                    services: ["accessibility", "family", "emergency"],
                    hours: {
                        weekdays: "No informado",
                        saturday: "No informado"
                    }
                },
                {
                    rank: 12,
                    name: "Cl√≠nica dental Experiencia Bliss",
                    address: "Marina de Chile 2889",
                    rating: 4.9,
                    reviews: 85,
                    bayesianScore: 4.796,
                    change: "same",
                    services: ["orthodontics", "emergency"],
                    hours: {
                        weekdays: "09:30 - 20:30",
                        saturday: "10:30 - 14:00"
                    }
                },
                {
                    rank: 13,
                    name: "Cl√≠nica Origen",
                    address: "Cochrane 635, Torre B",
                    rating: 5.0,
                    reviews: 41,
                    bayesianScore: 4.789,
                    change: "same",
                    services: ["orthodontics"],
                    hours: {
                        weekdays: "10:00 - 19:00",
                        saturday: "10:00 - 14:00"
                    }
                },
                {
                    rank: 14,
                    name: "Cl√≠nica KDENT",
                    address: "O'Higgins 630, Of. 403",
                    rating: 5.0,
                    reviews: 38,
                    bayesianScore: 4.779,
                    change: "same",
                    services: ["accessibility", "family", "emergency"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "Cerrado"
                    }
                },
                {
                    rank: 15,
                    name: "Dr. Pablo Cerda Ortodoncia",
                    address: "Barros Arana 162",
                    rating: 4.9,
                    reviews: 58,
                    bayesianScore: 4.764,
                    change: "same",
                    services: ["orthodontics"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "Cerrado"
                    }
                },
                {
                    rank: 16,
                    name: "CLINICA DENTAL ALICURA o'higgins",
                    address: "Av. O'Higgins 1628",
                    rating: 4.8,
                    reviews: 177,
                    bayesianScore: 4.757,
                    change: "same",
                    services: ["accessibility", "orthodontics", "emergency"],
                    hours: {
                        weekdays: "08:30 - 19:00",
                        saturday: "09:00 - 14:00"
                    }
                },
                {
                    rank: 17,
                    name: "Dra Katherine Adasme",
                    address: "Rengo 94, Oficina 41",
                    rating: 5.0,
                    reviews: 29,
                    bayesianScore: 4.746,
                    change: "same",
                    services: ["accessibility"],
                    hours: {
                        weekdays: "09:00 - 20:00",
                        saturday: "09:00 - 20:00"
                    }
                },
                {
                    rank: 18,
                    name: "Doctor Ortodoncia CDO",
                    address: "Barros Arana 492",
                    rating: 4.9,
                    reviews: 45,
                    bayesianScore: 4.740,
                    change: "same",
                    services: ["orthodontics"],
                    hours: {
                        weekdays: "09:00 - 19:00",
                        saturday: "09:00 - 14:00"
                    }
                },
                {
                    rank: 19,
                    name: "Cl√≠nica Dental Mood",
                    address: "Cochrane 678",
                    rating: 5.0,
                    reviews: 25,
                    bayesianScore: 4.727,
                    change: "up",
                    services: ["accessibility", "family", "orthodontics"],
                    hours: {
                        weekdays: "09:00 - 20:00",
                        saturday: "Cerrado"
                    }
                },
                {
                    rank: 20,
                    name: "Cl√≠nica Vitalzone",
                    address: "An√≠bal Pinto 295, Of. 403",
                    rating: 5.0,
                    reviews: 24,
                    bayesianScore: 4.722,
                    change: "up",
                    services: [],
                    hours: {
                        weekdays: "09:30 - 16:00",
                        saturday: "09:30 - 13:30"
                    }
                }
            ];

            useEffect(() => {
                setClinics(clinicsData);
                setFilteredClinics(clinicsData);
                console.log('Total de cl√≠nicas cargadas:', clinicsData.length);
                console.log('Cl√≠nicas:', clinicsData.map(c => `#${c.rank} - ${c.name}`));
            }, []);

            const categories = [
                { id: 'all', name: 'Todas', icon: 'üè•', count: clinicsData.length },
                { 
                    id: 'accessibility', 
                    name: 'Acceso Universal', 
                    icon: '‚ôø', 
                    count: 11
                },
                { 
                    id: 'family', 
                    name: 'Atenci√≥n Familiar', 
                    icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', 
                    count: 4
                },
                { 
                    id: 'orthodontics', 
                    name: 'Ortodoncia', 
                    icon: 'ü¶∑', 
                    count: 11
                },
                { 
                    id: 'emergency', 
                    name: 'Urgencias', 
                    icon: 'üö®', 
                    count: 7
                }
            ];

            useEffect(() => {
                if (selectedCategory === 'all') {
                    setFilteredClinics(clinics);
                } else {
                    setFilteredClinics(clinics.filter(clinic => 
                        clinic.services.includes(selectedCategory)
                    ));
                }
                setCurrentPage(1);
            }, [selectedCategory, clinics]);

            const totalPages = Math.ceil(filteredClinics.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentClinics = filteredClinics.slice(startIndex, endIndex);

            const getRankBadgeColor = (rank) => {
                if (rank === 1) return 'bg-yellow-400 text-yellow-900';
                if (rank === 2) return 'bg-gray-300 text-gray-900';
                if (rank === 3) return 'bg-amber-600 text-white';
                if (rank <= 10) return 'bg-blue-500 text-white';
                return 'bg-gray-500 text-white';
            };

            const getChangeIcon = (change) => {
                if (change === 'up') return '‚ÜóÔ∏è';
                if (change === 'down') return '‚ÜòÔ∏è';
                return '‚û°Ô∏è';
            };

            const handleContactSubmit = async (e) => {
                e.preventDefault();
                
                // Prevenir m√∫ltiples env√≠os
                if (isSubmitting) return;
                
                setIsSubmitting(true);
                
                const formData = {
                    timestamp: new Date().toISOString(),
                    name: contactData.name,
                    email: contactData.email,
                    whatsapp: contactData.whatsapp,
                    clinicName: contactData.clinicName || selectedClinic?.name || '',
                    reportType: reportType,
                    source: 'dashboard-responsive-nov2025'
                };

                try {
                    await fetch('https://script.google.com/macros/s/AKfycbyJMrK-cqWbo_bV5lTZloELoLIIqxdkzESTZZc2xfVFSATACIoTRRdELuaEnukVpmdP/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });

                    // Track conversi√≥n completada
                    if (window.goatcounter) {
                        window.goatcounter.count({
                            path: `/conversion/formulario-enviado/${reportType}`,
                            title: `Formulario Enviado - ${formData.clinicName || 'Sin especificar'}`,
                            event: true
                        });
                    }

                    alert('¬°Solicitud enviada! Te contactaremos por WhatsApp pronto.');
                    setShowContactForm(false);
                    setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
                    setReportType('');
                } catch (error) {
                    console.error('Error:', error);
                    alert('Hubo un error. Por favor intenta nuevamente.');
                } finally {
                    setIsSubmitting(false);
                }
            };

            // FUNCI√ìN PARA RENDERIZAR CONTENIDO DIN√ÅMICO DE HUELLA DIGITAL
            const renderHuellaContent = () => {
                if (!huellaClinic) return null;

                const rank = huellaClinic.rank;
                
                // PERFIL 1: Rating 5.0 perfecto (ranks 5, 8, 9, 11, 13, 14, 17, 19, 20)
                const perfectRatingClinics = [5, 8, 9, 11, 13, 14, 17, 19, 20];
                
                // PERFIL 2: Rating 4.9 o 4.8 (ranks 6, 7, 10, 12, 15, 16, 18)
                const nearPerfectClinics = [6, 7, 10, 12, 15, 16, 18];

                if (perfectRatingClinics.includes(rank)) {
                    // CONTENIDO PARA CL√çNICAS CON RATING 5.0
                    return (
                        <>
                            {/* M√âTRICAS CLAVE */}
                            <div className="huella-section">
                                <h2 className="section-title">üìä M√©tricas Clave</h2>
                                <div className="metrics-grid">
                                    <div className="metric-card">
                                        <div className="metric-value">{huellaClinic.bayesianScore.toFixed(2)}</div>
                                        <div className="metric-label">Score Bayesiano</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">{huellaClinic.reviews}</div>
                                        <div className="metric-label">Rese√±as Totales</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">#{huellaClinic.rank}</div>
                                        <div className="metric-label">Posici√≥n</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">{((huellaClinic.rank / 160) * 100).toFixed(1)}%</div>
                                        <div className="metric-label">Top Percentil</div>
                                    </div>
                                </div>
                            </div>

                            {/* AN√ÅLISIS COMPETITIVO */}
                            <div className="huella-section">
                                <h2 className="section-title">üéØ An√°lisis Competitivo</h2>
                                
                                <div className="insight-box">
                                    <div className="insight-title">‚úÖ Fortaleza Principal</div>
                                    <div className="insight-text">
                                        Cuentas con un <strong>rating perfecto de 5.0</strong>, lo que refleja una experiencia del paciente excepcional. 
                                        Esto te coloca entre las cl√≠nicas con mejor reputaci√≥n cualitativa de Concepci√≥n.
                                    </div>
                                </div>

                                    <div className="insight-box warning">
                                    <div className="insight-title">‚ö†Ô∏è Oportunidad de Crecimiento</div>
                                    <div className="insight-text">
                                        Con <strong>{huellaClinic.reviews} rese√±as</strong>, tu volumen de opiniones es bajo comparado con las cl√≠nicas del Top 5, 
                                        que promedian 113 rese√±as. <strong>Aumentar tu volumen de rese√±as</strong> es la clave para ascender en el ranking.
                                    </div>
                                </div>

                                <div className="insight-box">
                                    <div className="insight-title">üéØ Estrategia Recomendada</div>
                                    <div className="insight-text">
                                        <strong>Mant√©n la excelencia operacional</strong> que te ha dado un 5.0 perfecto. Paralelamente, 
                                        <strong> implementa un sistema de solicitud de rese√±as post-atenci√≥n</strong>. Con tu nivel de satisfacci√≥n, 
                                        cada paciente que dejes una rese√±a ser√° positiva y fortalecer√° tu posici√≥n.
                                    </div>
                                </div>
                            </div>

                            {/* COMPARACI√ìN CON TOP 5 */}
                            <div className="huella-section">
                                <h2 className="section-title">üìà Comparaci√≥n con el Top 5</h2>
                                <table className="comparison-table">
                                    <thead>
                                        <tr>
                                            <th>Cl√≠nica</th>
                                            <th>Score</th>
                                            <th>Rese√±as</th>
                                            <th>Gap</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>#1 - San Mart√≠n</strong></td>
                                            <td>4.89</td>
                                            <td>106</td>
                                            <td>-</td>
                                        </tr>
                                        <tr>
                                            <td><strong>#2 - Bio Bio Dental</strong></td>
                                            <td>4.88</td>
                                            <td>99</td>
                                            <td>-</td>
                                        </tr>
                                        <tr>
                                            <td><strong>#5 - Dra Weason</strong></td>
                                            <td>4.82</td>
                                            <td>52</td>
                                            <td>-</td>
                                        </tr>
                                        <tr className="highlight-you">
                                            <td><strong>#{huellaClinic.rank} - {huellaClinic.name}</strong></td>
                                            <td>{huellaClinic.bayesianScore.toFixed(2)}</td>
                                            <td>{huellaClinic.reviews}</td>
                                            <td>T√ö EST√ÅS AQU√ç</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p style={{fontSize: '14px', color: '#6b7280', marginTop: '10px'}}>
                                    üí° <strong>Insight:</strong> Con tu rating de 5.0, est√°s muy cerca del Top 5. 
                                    Aumentar tu volumen de rese√±as te permitir√° competir directamente por el Top 3.
                                </p>
                            </div>

                            {/* PLAN DE ACCI√ìN */}
                            <div className="huella-section">
                                <h2 className="section-title">üöÄ Plan de Acci√≥n para Escalar</h2>
                                <div style={{background: '#f9fafb', padding: '25px', borderRadius: '12px', border: '2px solid #e5e7eb'}}>
                                    <h3 style={{fontSize: '18px', fontWeight: '700', marginBottom: '15px', color: '#1f2937'}}>
                                        üéØ Meta: Alcanzar el Top 5 en 90 d√≠as
                                    </h3>
                                    <ul style={{listStyle: 'none', padding: 0}}>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Semana 1-2:</strong> Implementar QR en recepci√≥n para solicitar rese√±as post-atenci√≥n
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Semana 3-6:</strong> Enviar mensaje de agradecimiento con link de rese√±a 24h despu√©s de cada cita
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Semana 7-12:</strong> Monitorear semanalmente el crecimiento y ajustar estrategia
                                        </li>
                                    </ul>
                                    <div style={{marginTop: '20px', padding: '15px', background: 'white', borderRadius: '8px', border: '1px solid #d1d5db'}}>
                                        <p style={{margin: 0, fontSize: '14px', color: '#374151'}}>
                                            üìä <strong>Proyecci√≥n:</strong> Si consigues 2-3 rese√±as semanales, en 12 semanas tendr√°s 
                                            <strong> {huellaClinic.reviews + 30} rese√±as</strong> y tu score bayesiano subir√≠a a 
                                            <strong> ~4.85</strong>, coloc√°ndote cerca del <strong>Top 5</strong>.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* CTA */}
                            <div className="cta-section">
                                <span className="emoji-large">üìä</span>
                                <h3>¬øQuieres un an√°lisis m√°s profundo?</h3>
                                <p style={{fontSize: '16px', marginBottom: '20px', opacity: 0.95}}>
                                    Solicita tu <strong>Informe Premium Completo</strong> con an√°lisis de sentimiento, 
                                    benchmarking detallado y roadmap personalizado mes a mes.
                                </p>
                                <a href="#" className="cta-button" onClick={(e) => {
                                    e.preventDefault();
                                    setShowHuellaDigital(false);
                                    setReportType('clinic');
                                    setShowContactForm(true);
                                    setContactData({...contactData, clinicName: huellaClinic.name});
                                    
                                    // Track conversi√≥n a Informe Premium
                                    if (window.goatcounter) {
                                        window.goatcounter.count({
                                            path: `/conversion/informe-premium/clinica-${huellaClinic.rank}`,
                                            title: `Solicitud Informe Premium - ${huellaClinic.name}`,
                                            event: true
                                        });
                                    }
                                }}>
                                    üìà Solicitar Informe Premium
                                </a>
                                <p style={{fontSize: '13px', marginTop: '15px', opacity: 0.8}}>
                                    üí∞ Precio de lanzamiento: <strong>$19.999</strong> (antes $49.999)
                                </p>
                            </div>
                        </>
                    );
                } else if (nearPerfectClinics.includes(rank)) {
                    // CONTENIDO PARA CL√çNICAS CON RATING 4.9
                    return (
                        <>
                            {/* M√âTRICAS CLAVE */}
                            <div className="huella-section">
                                <h2 className="section-title">üìä M√©tricas Clave</h2>
                                <div className="metrics-grid">
                                    <div className="metric-card">
                                        <div className="metric-value">{huellaClinic.bayesianScore.toFixed(2)}</div>
                                        <div className="metric-label">Score Bayesiano</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">{huellaClinic.reviews}</div>
                                        <div className="metric-label">Rese√±as Totales</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">#{huellaClinic.rank}</div>
                                        <div className="metric-label">Posici√≥n</div>
                                    </div>
                                    <div className="metric-card">
                                        <div className="metric-value">{((huellaClinic.rank / 160) * 100).toFixed(1)}%</div>
                                        <div className="metric-label">Top Percentil</div>
                                    </div>
                                </div>
                            </div>

                            {/* AN√ÅLISIS COMPETITIVO */}
                            <div className="huella-section">
                                <h2 className="section-title">üéØ An√°lisis Competitivo</h2>
                                
                                <div className="insight-box">
                                    <div className="insight-title">‚úÖ Fortalezas Principales</div>
                                    <div className="insight-text">
                                        Con <strong>{huellaClinic.reviews} rese√±as</strong> y un <strong>rating de {huellaClinic.rating}</strong>, 
                                        demuestras solidez tanto en volumen como en calidad. Tu combinaci√≥n de escala y satisfacci√≥n 
                                        te posiciona competitivamente en el mercado.
                                    </div>
                                </div>

                                <div className="insight-box warning">
                                    <div className="insight-title">‚ö†Ô∏è Oportunidad Cr√≠tica</div>
                                    <div className="insight-text">
                                        Tu rating de <strong>4.9</strong> indica que aproximadamente <strong>el 10% de tus pacientes</strong> 
                                        no est√°n completamente satisfechos. Identificar y resolver estos casos espec√≠ficos puede ser la diferencia 
                                        entre mantenerte donde est√°s y <strong>ascender al Top 5</strong>.
                                    </div>
                                </div>

                                <div className="insight-box">
                                    <div className="insight-title">üéØ Estrategia Dual Recomendada</div>
                                    <div className="insight-text">
                                        <strong>1) Analiza tus rese√±as negativas/neutrales:</strong> Identifica patrones comunes (tiempos de espera, 
                                        comunicaci√≥n, costos) y trabaja en resolver esos puntos.<br/><br/>
                                        <strong>2) Implementa recuperaci√≥n proactiva:</strong> Contacta a pacientes insatisfechos para resolver 
                                        sus inquietudes. Muchos actualizar√°n su rese√±a tras una buena experiencia de servicio post-atenci√≥n.
                                    </div>
                                </div>
                            </div>

                            {/* COMPARACI√ìN CON TOP 5 */}
                            <div className="huella-section">
                                <h2 className="section-title">üìà Comparaci√≥n con el Top 5</h2>
                                <table className="comparison-table">
                                    <thead>
                                        <tr>
                                            <th>Cl√≠nica</th>
                                            <th>Score</th>
                                            <th>Rese√±as</th>
                                            <th>Rating</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>#1 - San Mart√≠n</strong></td>
                                            <td>4.89</td>
                                            <td>106</td>
                                            <td>5.0</td>
                                        </tr>
                                        <tr>
                                            <td><strong>#3 - Brelo</strong></td>
                                            <td>4.86</td>
                                            <td>261</td>
                                            <td>4.9</td>
                                        </tr>
                                        <tr>
                                            <td><strong>#5 - Dra Weason</strong></td>
                                            <td>4.82</td>
                                            <td>52</td>
                                            <td>5.0</td>
                                        </tr>
                                        <tr className="highlight-you">
                                            <td><strong>#{huellaClinic.rank} - {huellaClinic.name}</strong></td>
                                            <td>{huellaClinic.bayesianScore.toFixed(2)}</td>
                                            <td>{huellaClinic.reviews}</td>
                                            <td>{huellaClinic.rating}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p style={{fontSize: '14px', color: '#6b7280', marginTop: '10px'}}>
                                    üí° <strong>Insight:</strong> La diferencia entre t√∫ y el Top 5 es m√≠nima: 
                                    <strong> {Math.abs(4.82 - huellaClinic.bayesianScore).toFixed(3)} puntos</strong>. 
                                    Mejorar tu rating de 4.9 a 5.0 te colocar√≠a autom√°ticamente en el Top 5.
                                </p>
                            </div>

                            {/* PLAN DE ACCI√ìN */}
                            <div className="huella-section">
                                <h2 className="section-title">üöÄ Plan de Acci√≥n para Ascender</h2>
                                <div style={{background: '#f9fafb', padding: '25px', borderRadius: '12px', border: '2px solid #e5e7eb'}}>
                                    <h3 style={{fontSize: '18px', fontWeight: '700', marginBottom: '15px', color: '#1f2937'}}>
                                        üéØ Meta: Alcanzar el Top 5 mejorando tu rating
                                    </h3>
                                    <ul style={{listStyle: 'none', padding: 0}}>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Paso 1:</strong> Descarga todas tus rese√±as y filtra las de 4 estrellas o menos
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Paso 2:</strong> Identifica los 3 problemas m√°s mencionados en rese√±as negativas
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Paso 3:</strong> Implementa mejoras operacionales para resolver esos 3 problemas
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Paso 4:</strong> Contacta proactivamente a pacientes con rese√±as negativas recientes
                                        </li>
                                        <li style={{marginBottom: '12px', fontSize: '15px'}}>
                                            <strong>Paso 5:</strong> Aumenta el volumen de rese√±as positivas para diluir las negativas
                                        </li>
                                    </ul>
                                    <div style={{marginTop: '20px', padding: '15px', background: 'white', borderRadius: '8px', border: '1px solid #d1d5db'}}>
                                        <p style={{margin: 0, fontSize: '14px', color: '#374151'}}>
                                            üìä <strong>Proyecci√≥n:</strong> Si logras subir tu rating de <strong>4.9 a 5.0</strong> y 
                                            mantienes tu volumen de {huellaClinic.reviews} rese√±as, tu score bayesiano subir√≠a a 
                                            <strong> ~4.83-4.85</strong>, acerc√°ndote significativamente al <strong>Top 5</strong>.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* CTA */}
                            <div className="cta-section">
                                <span className="emoji-large">üîç</span>
                                <h3>¬øQuieres saber exactamente qu√© dicen tus rese√±as negativas?</h3>
                                <p style={{fontSize: '16px', marginBottom: '20px', opacity: 0.95}}>
                                    Solicita tu <strong>Informe Premium con An√°lisis de Sentimiento</strong>. Te mostraremos 
                                    los problemas exactos que mencionan tus pacientes insatisfechos y c√≥mo resolverlos.
                                </p>
                                <a href="#" className="cta-button" onClick={(e) => {
                                    e.preventDefault();
                                    setShowHuellaDigital(false);
                                    setReportType('clinic');
                                    setShowContactForm(true);
                                    setContactData({...contactData, clinicName: huellaClinic.name});
                                    
                                    // Track conversi√≥n a Informe Premium
                                    if (window.goatcounter) {
                                        window.goatcounter.count({
                                            path: `/conversion/informe-premium/clinica-${huellaClinic.rank}`,
                                            title: `Solicitud Informe Premium - ${huellaClinic.name}`,
                                            event: true
                                        });
                                    }
                                }}>
                                    üìä Solicitar An√°lisis Completo
                                </a>
                                <p style={{fontSize: '13px', marginTop: '15px', opacity: 0.8}}>
                                    üí∞ Precio de lanzamiento: <strong>$19.999</strong> (antes $49.999)
                                </p>
                            </div>
                        </>
                    );
                }

                // Fallback gen√©rico si el rank no est√° en ning√∫n perfil
                return (
                    <div className="huella-section">
                        <h2 className="section-title">üìä Informaci√≥n de la Cl√≠nica</h2>
                        <p>Contenido en desarrollo para esta cl√≠nica.</p>
                    </div>
                );
            };

            return (
                <div className="min-h-screen">
                    {/* HEADER */}
                    <header className="bg-gradient-to-r from-blue-600 via-purple-600 to-yellow-500 text-white py-8 sm:py-16">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold mb-3 sm:mb-4">
                                ü¶∑ Ranking Cl√≠nicas Dentales Concepci√≥n
                            </h1>
                            <p className="text-base sm:text-lg md:text-xl mb-4 sm:mb-6 opacity-90">
                                Las 20 mejores cl√≠nicas seg√∫n an√°lisis bayesiano de rese√±as
                            </p>
                            <div className="bg-white bg-opacity-20 rounded-lg p-4 sm:p-6 inline-block">
                                <p className="text-base sm:text-xl font-semibold">üìÖ Fecha de corte: 09/11/2025</p>
                                <p className="text-base sm:text-xl font-semibold">üîÑ Pr√≥xima actualizaci√≥n: 07/12/2025</p>
                            </div>
                        </div>
                    </header>

                    {/* DISCLAIMER DE DATOS */}
                    <div className="max-w-6xl mx-auto px-4 mt-6">
                        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg">
                            <p className="text-sm text-blue-900">
                                <strong>‚ÑπÔ∏è Nota:</strong> Este ranking no almacena datos de Google. Toda la informaci√≥n se genera en tiempo real mediante consultas a Google Maps.
                            </p>
                        </div>
                    </div>

                    {/* STATS */}
                    <div className="max-w-6xl mx-auto px-4 py-6 sm:py-8">
                        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4">
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-md text-center">
                                <div className="text-2xl sm:text-3xl font-bold text-blue-600">160</div>
                                <div className="text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2">Cl√≠nicas Analizadas</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-md text-center">
                                <div className="text-2xl sm:text-3xl font-bold text-purple-600">1,488</div>
                                <div className="text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2">Rese√±as en el Top 20</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-md text-center">
                                <div className="text-2xl sm:text-3xl font-bold text-yellow-600">4.80</div>
                                <div className="text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2">Score Promedio Top 20</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-md text-center">
                                <div className="text-2xl sm:text-3xl font-bold text-green-600">Top 12%</div>
                                <div className="text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2">Elite del Mercado</div>
                            </div>
                        </div>
                    </div>

                    {/* CATEGORIES */}
                    <div className="max-w-6xl mx-auto px-4 mb-6 sm:mb-8">
                        <div className="bg-white p-4 sm:p-6 rounded-xl shadow-md">
                            <h2 className="text-lg sm:text-xl font-bold text-gray-800 mb-3 sm:mb-4">Filtrar por Servicios</h2>
                            <div className="grid grid-cols-2 sm:flex sm:flex-wrap gap-2 sm:gap-3">
                                {categories.map(cat => (
                                    <button
                                        key={cat.id}
                                        onClick={() => setSelectedCategory(cat.id)}
                                        className={`px-3 sm:px-4 py-2 rounded-lg font-semibold transition-all text-sm sm:text-base ${
                                            selectedCategory === cat.id
                                                ? 'bg-blue-600 text-white shadow-lg'
                                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        {cat.icon} {cat.name} ({cat.count})
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* TABLE */}
                    <div className="max-w-6xl mx-auto px-4 mb-8 sm:mb-12">
                        <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                            {/* VISTA M√ìVIL - Cards */}
                            <div className="block lg:hidden">
                                {currentClinics.map(clinic => (
                                    <div key={clinic.rank} className="border-b border-gray-200 p-4 hover:bg-gray-50">
                                        <div className="flex items-start justify-between mb-3">
                                            <div className="flex items-center gap-3">
                                                <span className={`px-3 py-1 rounded-lg font-bold text-sm ${getRankBadgeColor(clinic.rank)}`}>
                                                    #{clinic.rank}
                                                </span>
                                                <span className="text-lg">{getChangeIcon(clinic.change)}</span>
                                            </div>
                                            <div className="text-right">
                                                <div className="text-xl font-bold text-blue-600">{clinic.bayesianScore.toFixed(2)}</div>
                                                <div className="text-xs text-gray-500">Score Bayesiano</div>
                                            </div>
                                        </div>
                                        
                                        <h3 className="font-bold text-gray-800 text-base mb-2">{clinic.name}</h3>
                                        <p className="text-sm text-gray-600 mb-3">{clinic.address}</p>
                                        
                                        <div className="grid grid-cols-2 gap-2 mb-3 text-sm">
                                            <div>
                                                <span className="text-gray-500">Rating Google:</span>
                                                <div className="font-semibold">{clinic.rating} ‚≠ê</div>
                                            </div>
                                            <div>
                                                <span className="text-gray-500">Rese√±as:</span>
                                                <div className="font-semibold">{clinic.reviews}</div>
                                            </div>
                                        </div>

                                        <div className="flex gap-2 mt-3">
                                            {clinic.rank >= 6 && clinic.rank <= 20 && (
                                                <button
                                                    onClick={() => {
                                                        setHuellaClinic(clinic);
                                                        setShowHuellaDigital(true);
                                                        
                                                        // Track en GoatCounter
                                                        if (window.goatcounter) {
                                                            window.goatcounter.count({
                                                                path: `/huella-digital/clinica-${clinic.rank}`,
                                                                title: `Huella Digital - ${clinic.name}`,
                                                                event: true
                                                            });
                                                        }
                                                    }}
                                                    className="flex-1 bg-gradient-to-r from-purple-600 to-purple-800 text-white py-2 px-3 rounded-lg font-bold text-sm hover:from-purple-700 hover:to-purple-900 transition-all"
                                                >
                                                    üîç Huella Digital
                                                </button>
                                            )}
                                            <button
                                                onClick={() => {
                                                    setSelectedClinic(clinic);
                                                    setShowClinicModal(true);
                                                }}
                                                className="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg font-bold text-sm hover:bg-blue-700 transition-all"
                                            >
                                                üëÅÔ∏è Ver M√°s Detalle
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* VISTA DESKTOP - Tabla */}
                            <div className="hidden lg:block table-scroll">
                                <table className="w-full">
                                    <thead className="bg-gradient-to-r from-blue-600 to-purple-600 text-white">
                                        <tr>
                                            <th className="px-6 py-4 text-left font-semibold">Ranking</th>
                                            <th className="px-6 py-4 text-left font-semibold">Cl√≠nica</th>
                                            <th className="px-6 py-4 text-center font-semibold">Score Bayesiano</th>
                                            <th className="px-6 py-4 text-center font-semibold">Rating Google</th>
                                            <th className="px-6 py-4 text-center font-semibold">Rese√±as</th>
                                            <th className="px-6 py-4 text-center font-semibold">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {currentClinics.map((clinic, index) => (
                                            <tr key={clinic.rank} className={`${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-blue-50 transition-colors`}>
                                                <td className="px-6 py-4">
                                                    <div className="flex items-center gap-2">
                                                        <span className={`px-3 py-1 rounded-lg font-bold ${getRankBadgeColor(clinic.rank)}`}>
                                                            #{clinic.rank}
                                                        </span>
                                                        <span className="text-lg">{getChangeIcon(clinic.change)}</span>
                                                    </div>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <div className="font-semibold text-gray-800">{clinic.name}</div>
                                                    <div className="text-sm text-gray-600">{clinic.address}</div>
                                                </td>
                                                <td className="px-6 py-4 text-center">
                                                    <div className="text-2xl font-bold text-blue-600">{clinic.bayesianScore.toFixed(2)}</div>
                                                </td>
                                                <td className="px-6 py-4 text-center">
                                                    <div className="flex items-center justify-center gap-1">
                                                        <span className="text-lg font-semibold">{clinic.rating}</span>
                                                        <span className="text-yellow-500">‚≠ê</span>
                                                    </div>
                                                </td>
                                                <td className="px-6 py-4 text-center">
                                                    <span className="font-semibold text-gray-700">{clinic.reviews}</span>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <div className="flex flex-col gap-2">
                                                        {clinic.rank >= 6 && clinic.rank <= 20 && (
                                                            <button
                                                                onClick={() => {
                                                                    setHuellaClinic(clinic);
                                                                    setShowHuellaDigital(true);
                                                                    
                                                                    // Track en GoatCounter
                                                                    if (window.goatcounter) {
                                                                        window.goatcounter.count({
                                                                            path: `/huella-digital/clinica-${clinic.rank}`,
                                                                            title: `Huella Digital - ${clinic.name}`,
                                                                            event: true
                                                                        });
                                                                    }
                                                                }}
                                                                className="w-full bg-gradient-to-r from-purple-600 to-purple-800 text-white py-2 px-4 rounded-lg font-bold text-sm hover:from-purple-700 hover:to-purple-900 transition-all shadow-md hover:shadow-lg"
                                                            >
                                                                üîç Huella Digital
                                                            </button>
                                                        )}
                                                        <button
                                                            onClick={() => {
                                                                setSelectedClinic(clinic);
                                                                setShowClinicModal(true);
                                                            }}
                                                            className="w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-bold text-sm hover:bg-blue-700 transition-all"
                                                        >
                                                            üëÅÔ∏è Ver M√°s Detalle
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>

                            {/* PAGINATION */}
                            {totalPages > 1 && (
                                <div className="bg-gray-50 px-4 sm:px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 border-t border-gray-200">
                                    <div className="text-xs sm:text-sm text-gray-700">
                                        Mostrando {startIndex + 1} a {Math.min(endIndex, filteredClinics.length)} de {filteredClinics.length} cl√≠nicas
                                    </div>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                                            disabled={currentPage === 1}
                                            className="px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors text-sm sm:text-base"
                                        >
                                            ‚Üê Anterior
                                        </button>
                                        <span className="px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold text-sm sm:text-base">
                                            {currentPage} / {totalPages}
                                        </span>
                                        <button
                                            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}
                                            disabled={currentPage === totalPages}
                                            className="px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors text-sm sm:text-base"
                                        >
                                            Siguiente ‚Üí
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* CTA SECTION - Solo para CL√çNICAS */}
                    <div className="max-w-6xl mx-auto px-4 mb-8 sm:mb-12">
                        <div className="bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-xl p-6 sm:p-8 text-white text-center">
                            <h2 className="text-2xl sm:text-3xl font-bold mb-3 sm:mb-4">
                                ¬øQuieres saber c√≥mo est√° tu cl√≠nica frente a la competencia?
                            </h2>
                            <p className="text-base sm:text-lg mb-6 sm:mb-8 opacity-90">
                                Obt√©n un informe completo con an√°lisis bayesiano, benchmarking y recomendaciones estrat√©gicas
                            </p>
                            <button
                                onClick={() => {
                                    setReportType('clinic');
                                    setShowContactForm(true);
                                }}
                                className="bg-white text-blue-600 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-bold text-base sm:text-lg hover:bg-gray-100 transition-all inline-block shadow-lg hover:shadow-xl"
                            >
                                üìä Solicitar An√°lisis Competitivo
                            </button>
                            <p className="mt-4 text-xs sm:text-sm opacity-80">
                                <span className="line-through">$49.999</span> <span className="text-xl sm:text-2xl font-bold ml-2">$19.999</span> üéâ Precio de lanzamiento
                            </p>
                        </div>
                    </div>

                    {/* MODAL DETALLE CL√çNICA */}
                    {showClinicModal && selectedClinic && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onClick={() => setShowClinicModal(false)}>
                            <div className="bg-white rounded-2xl max-w-2xl w-full modal-content p-6 sm:p-8" onClick={(e) => e.stopPropagation()}>
                                <div className="flex justify-between items-start mb-4 sm:mb-6">
                                    <div>
                                        <div className="flex items-center gap-3 mb-2">
                                            <span className={`px-3 py-1 rounded-lg font-bold ${getRankBadgeColor(selectedClinic.rank)}`}>
                                                #{selectedClinic.rank}
                                            </span>
                                            <span className="text-2xl">{getChangeIcon(selectedClinic.change)}</span>
                                        </div>
                                        <h2 className="text-xl sm:text-2xl font-bold text-gray-800">{selectedClinic.name}</h2>
                                    </div>
                                    <button 
                                        onClick={() => setShowClinicModal(false)}
                                        className="text-gray-500 hover:text-gray-700 text-3xl font-bold"
                                    >
                                        √ó
                                    </button>
                                </div>

                                <div className="space-y-4 sm:space-y-6">
                                    <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
                                        <div className="bg-blue-50 p-3 sm:p-4 rounded-lg">
                                            <div className="text-xs sm:text-sm text-blue-600 font-semibold mb-1">Score Bayesiano</div>
                                            <div className="text-xl sm:text-2xl font-bold text-blue-700">{selectedClinic.bayesianScore.toFixed(2)}</div>
                                        </div>
                                        <div className="bg-yellow-50 p-3 sm:p-4 rounded-lg">
                                            <div className="text-xs sm:text-sm text-yellow-600 font-semibold mb-1">Rating Google</div>
                                            <div className="text-xl sm:text-2xl font-bold text-yellow-700">{selectedClinic.rating} ‚≠ê</div>
                                        </div>
                                        <div className="bg-purple-50 p-3 sm:p-4 rounded-lg">
                                            <div className="text-xs sm:text-sm text-purple-600 font-semibold mb-1">Rese√±as</div>
                                            <div className="text-xl sm:text-2xl font-bold text-purple-700">{selectedClinic.reviews}</div>
                                        </div>
                                    </div>

                                    <div>
                                        <h3 className="font-bold text-gray-800 mb-2 text-base sm:text-lg">üìç Direcci√≥n</h3>
                                        <p className="text-sm sm:text-base text-gray-600">{selectedClinic.address}</p>
                                    </div>

                                    <div>
                                        <h3 className="font-bold text-gray-800 mb-3 text-base sm:text-lg">üïê Horarios de Atenci√≥n</h3>
                                        <div className="bg-gray-50 p-3 sm:p-4 rounded-lg space-y-2">
                                            <div className="flex justify-between text-sm sm:text-base">
                                                <span className="text-gray-600">Lunes a Viernes:</span>
                                                <span className="font-semibold text-gray-800">{selectedClinic.hours.weekdays}</span>
                                            </div>
                                            <div className="flex justify-between text-sm sm:text-base">
                                                <span className="text-gray-600">S√°bado:</span>
                                                <span className="font-semibold text-gray-800">{selectedClinic.hours.saturday}</span>
                                            </div>
                                        </div>
                                    </div>

                                    {selectedClinic.services.length > 0 && (
                                        <div>
                                            <h3 className="font-bold text-gray-800 mb-3 text-base sm:text-lg">üè• Servicios Especializados</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedClinic.services.includes('accessibility') && (
                                                    <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold">‚ôø Acceso Universal</span>
                                                )}
                                                {selectedClinic.services.includes('family') && (
                                                    <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Atenci√≥n Familiar</span>
                                                )}
                                                {selectedClinic.services.includes('orthodontics') && (
                                                    <span className="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold">ü¶∑ Ortodoncia</span>
                                                )}
                                                {selectedClinic.services.includes('emergency') && (
                                                    <span className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold">üö® Urgencias 24/7</span>
                                                )}
                                            </div>
                                        </div>
                                    )}

                                    <button
                                        onClick={() => {
                                            setShowClinicModal(false);
                                            setReportType('clinic');
                                            setShowContactForm(true);
                                            setContactData({...contactData, clinicName: selectedClinic.name});
                                        }}
                                        className="w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-3 sm:py-4 rounded-xl font-bold text-base sm:text-lg hover:from-blue-700 hover:to-blue-900 transition-all shadow-lg hover:shadow-xl"
                                    >
                                        üìä Solicitar An√°lisis Competitivo
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL HUELLA DIGITAL */}
                    {showHuellaDigital && huellaClinic && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onClick={() => setShowHuellaDigital(false)}>
                            <div className="bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="huella-container">
                                    {/* Bot√≥n cerrar */}
                                    <div className="absolute top-4 right-4 z-10">
                                        <button 
                                            onClick={() => setShowHuellaDigital(false)}
                                            className="bg-white text-gray-700 hover:text-gray-900 rounded-full w-10 h-10 flex items-center justify-center shadow-lg text-2xl font-bold"
                                        >
                                            √ó
                                        </button>
                                    </div>

                                    {/* HEADER */}
                                    <div className="huella-header">
                                        <h1>HUELLA DIGITAL EXPRESS</h1>
                                        <p className="subtitle">An√°lisis Competitivo Gratuito</p>
                                        <div className="rank-badge">#{huellaClinic.rank}</div>
                                        <h2 style={{marginTop: '15px', fontSize: '28px'}}>{huellaClinic.name}</h2>
                                        <p style={{marginTop: '10px', fontSize: '16px'}}>Ranking Oficial Cl√≠nicas Dentales Concepci√≥n</p>
                                    </div>
                                    
                                    {/* CONTENT DIN√ÅMICO */}
                                    <div className="huella-content">
                                        {renderHuellaContent()}
                                    </div>
                                    
                                    {/* FOOTER */}
                                    <div className="huella-footer">
                                        <p>
                                            üìä <strong>M√©trica CX</strong> ‚Ä¢ Rankings Oficiales Cl√≠nicas Dentales Concepci√≥n<br/>
                                            Metodolog√≠a Bayesiana ‚Ä¢ 4,487 rese√±as analizadas ‚Ä¢ 160 cl√≠nicas rankeadas<br/>
                                            Fecha de corte: 09/11/2025
                                        </p>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL FORMULARIO CONTACTO */}
                    {showContactForm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl max-w-md w-full modal-content p-6 sm:p-8">
                                <div className="flex justify-between items-center mb-4 sm:mb-6">
                                    <h3 className="text-xl sm:text-2xl font-bold text-gray-800">
                                        Solicitar Informe Premium
                                    </h3>
                                    <button 
                                        onClick={() => {
                                            setShowContactForm(false);
                                            setReportType('');
                                        }}
                                        className="text-gray-500 hover:text-gray-700 text-3xl font-bold"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 rounded-lg">
                                    <p className="text-xs sm:text-sm text-blue-800">
                                        <strong>Precio:</strong> <span className="line-through opacity-60">$49.999</span> <span className="text-base sm:text-lg font-bold">$19.999</span> üéâ<br/>
                                        <strong className="text-green-700">Precio de lanzamiento</strong><br/>
                                        <strong>Incluye:</strong> An√°lisis cient√≠fico completo + benchmarking + recomendaciones<br/>
                                        <strong>Entrega:</strong> 24-48 horas<br/>
                                        <strong>Contacto:</strong> WhatsApp
                                    </p>
                                </div>
                                
                                <form onSubmit={handleContactSubmit} className="space-y-3 sm:space-y-4">
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Nombre completo *</label>
                                        <input 
                                            type="text"
                                            value={contactData.name}
                                            onChange={(e) => setContactData({...contactData, name: e.target.value})}
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                                        <input 
                                            type="email"
                                            value={contactData.email}
                                            onChange={(e) => setContactData({...contactData, email: e.target.value})}
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">WhatsApp *</label>
                                        <input 
                                            type="tel"
                                            value={contactData.whatsapp}
                                            onChange={(e) => setContactData({...contactData, whatsapp: e.target.value})}
                                            placeholder="+56 9 1234 5678"
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Cl√≠nica de inter√©s (opcional)</label>
                                        <input 
                                            type="text"
                                            value={contactData.clinicName}
                                            onChange={(e) => setContactData({...contactData, clinicName: e.target.value})}
                                            placeholder="Ingresa cualquier cl√≠nica de Concepci√≥n"
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                        />
                                    </div>
                                    
                                    <button 
                                        type="submit"
                                        disabled={!contactData.name || !contactData.email || !contactData.whatsapp || isSubmitting}
                                        className={`w-full py-3 sm:py-4 rounded-lg font-bold text-base sm:text-lg transition-all duration-300 ${
                                            isSubmitting 
                                                ? 'bg-green-500 text-white cursor-wait' 
                                                : !contactData.name || !contactData.email || !contactData.whatsapp
                                                    ? 'bg-gray-400 text-white cursor-not-allowed'
                                                    : 'bg-blue-600 text-white hover:bg-blue-700 active:bg-green-500 active:scale-95'
                                        }`}
                                    >
                                        {isSubmitting ? '‚úì Enviando...' : 'Enviar Solicitud'}
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* FOOTER */}
                    <footer className="bg-gray-900 text-white py-8 sm:py-12">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <p className="text-base sm:text-lg text-gray-300 mb-2">
                                üìä Ranking basado en an√°lisis bayesiano de rese√±as de Google Maps
                            </p>
                            <p className="text-sm sm:text-base text-gray-400">
                                Fecha de corte: 09/11/2025 | Pr√≥xima actualizaci√≥n: 07/12/2025
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>

    <script data-goatcounter="https://dental-conce.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
