<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking Cl√≠nicas Dentales Concepci√≥n</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function Dashboard() {
            const [showContactForm, setShowContactForm] = useState(false);
            const [reportType, setReportType] = useState('');
            const [selectedClinic, setSelectedClinic] = useState(null);
            const [showClinicModal, setShowClinicModal] = useState(false);
            const [contactData, setContactData] = useState({ name: '', email: '', whatsapp: '', clinicName: '' });
            const [currentPage, setCurrentPage] = useState(1);

            // Datos actualizados - Septiembre 2025 - SOLO REORDENAMIENTO
            const clinicsData = [
                { id: 1, name: "Cl√≠nica Dental Brelo - Concepci√≥n", rating: 5.0, reviews: 245, score: 4.906, rank: 1, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "Cochrane 844" },
                { id: 2, name: "Cl√≠nica Dental San Mart√≠n", rating: 5.0, reviews: 105, score: 4.821, rank: 2, acceso: true, familia: true, ortodoncia: true, urgencias: true, horario: "08:30 - 19:30", sabado: "09:00 - 14:00", direccion: "San Mart√≠n 450" },
                { id: 3, name: "Cl√≠nica Bio Bio Dental", rating: 5.0, reviews: 98, score: 4.813, rank: 3, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "O'Higgins Poniente 77" },
                { id: 4, name: "Hola Dental Concepci√≥n", rating: 4.9, reviews: 92, score: 4.740, rank: 4, acceso: true, familia: false, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Tucapel 240, Concepci√≥n" },
                { id: 5, name: "Dra. Gabi Ib√°√±ez", rating: 5.0, reviews: 55, score: 4.736, rank: 5, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Lincoy√°n 444, Of. 313" },
                { id: 6, name: "M√ºnzenmayer Odontolog√≠a", rating: 5.0, reviews: 49, score: 4.720, rank: 6, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "09:30 - 19:00", sabado: "cerrado", direccion: "Anibal Pinto 131, Concepci√≥n" },
                { id: 7, name: "KAI Estudio Dental", rating: 5.0, reviews: 47, score: 4.714, rank: 7, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "09:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Rengo 94, oficina 51" },
                { id: 8, name: "CLINICA DENTAL ALICURA o'higgins", rating: 4.8, reviews: 156, score: 4.714, rank: 8, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "08:30 - 19:00", sabado: "09:00 - 14:00", direccion: "Av. O'Higgins 1628" },
                { id: 9, name: "Cl√≠nica dental Experiencia Bliss", rating: 4.9, reviews: 72, score: 4.714, rank: 9, acceso: false, familia: false, ortodoncia: true, urgencias: true, horario: "09:30 - 20:30", sabado: "10:30 - 14:00", direccion: "Marina de Chile 2889" },
                { id: 10, name: "Dra Carolina Weason", rating: 5.0, reviews: 46, score: 4.711, rank: 10, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "no informado", sabado: "no informado", direccion: "Lord Cochrane 815" },
                { id: 11, name: "VR Cl√≠nica dental", rating: 5.0, reviews: 42, score: 4.708, rank: 11, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "no informado", sabado: "no informado", direccion: "Angol 436, Of. 402" },
                { id: 12, name: "CentroDent", rating: 4.9, reviews: 99, score: 4.705, rank: 12, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:30 - 17:30", sabado: "cerrado", direccion: "Rengo 193, 2¬∫ piso" },
                { id: 13, name: "Dr. Pablo Cerda Ortodoncia", rating: 4.9, reviews: 58, score: 4.702, rank: 13, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "Barros Arana 162" },
                { id: 14, name: "Clinica A+ Salud", rating: 5.0, reviews: 43, score: 4.700, rank: 14, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 17:00", direccion: "San Mart√≠n 654, Of. 31" },
                { id: 15, name: "Cl√≠nica Origen", rating: 5.0, reviews: 36, score: 4.698, rank: 15, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Cochrane 635, Torre B" },
                { id: 16, name: "Dra Katherine Adasme", rating: 5.0, reviews: 29, score: 4.695, rank: 16, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 20:00", sabado: "09:00 - 20:00", direccion: "Rengo 94, Oficina 41" },
                { id: 17, name: "Doctor Ortodoncia CDO", rating: 4.9, reviews: 39, score: 4.692, rank: 17, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "Barros Arana 492" },
                { id: 18, name: "Cl√≠nica KDENT", rating: 5.0, reviews: 27, score: 4.690, rank: 18, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "O'Higgins 630, Of. 403" },
                { id: 19, name: "Cl√≠nica Dental Mood", rating: 5.0, reviews: 25, score: 4.688, rank: 19, acceso: true, familia: true, ortodoncia: true, urgencias: false, horario: "09:00 - 20:00", sabado: "cerrado", direccion: "Cochrane 678" },
                { id: 20, name: "Cl√≠nica Valinor", rating: 5.0, reviews: 23, score: 4.685, rank: 20, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "09:00 - 20:00", sabado: "09:00 - 14:00", direccion: "Barros Arana 1098" }
            ];

            const handleContactSubmit = async (e) => {
                e.preventDefault();
                
                const formData = {
                    timestamp: new Date().toISOString(),
                    name: contactData.name,
                    email: contactData.email,
                    whatsapp: contactData.whatsapp,
                    clinicName: contactData.clinicName || selectedClinic?.name || '',
                    reportType: reportType,
                    source: 'dashboard-github-sept2025'
                };

                try {
                    await fetch('https://script.google.com/macros/s/AKfycbyJMrK-cqWbo_bV5lTZloELoLIIqxdkzESTZZc2xfVFSATACIoTRRdELuaEnukVpmdP/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });
                    
                    alert(`¬°Solicitud enviada exitosamente!\n\nRecibir√°s tu Informe Premium en las pr√≥ximas 24 horas.\n\nTe contactaremos al WhatsApp: ${contactData.whatsapp}`);
                } catch (error) {
                    alert('Solicitud enviada. Te contactaremos pronto.');
                } finally {
                    setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
                    setShowContactForm(false);
                    setReportType('');
                }
            };

            const getRankColor = (rank) => {
                if (rank === 1) return 'bg-yellow-500';
                if (rank === 2) return 'bg-gray-400';
                if (rank === 3) return 'bg-amber-600';
                if (rank <= 10) return 'bg-blue-500';
                return 'bg-slate-400';
            };

            const getChangeIndicator = (rank) => {
                const changes = {
                    1: { type: 'up', from: 3, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+2' },
                    2: { type: 'down', from: 1, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    3: { type: 'down', from: 2, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    4: { type: 'up', from: 7, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+3' },
                    5: { type: 'down', from: 4, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    6: { type: 'down', from: 5, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    7: { type: 'up', from: 8, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    8: { type: 'up', from: 15, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+7' },
                    9: { type: 'up', from: 12, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+3' },
                    10: { type: 'down', from: 9, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    12: { type: 'down', from: 6, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-6' }
                };
                
                return changes[rank] || { type: 'same', color: 'bg-gray-400', icon: '‚û°Ô∏è', text: '=' };
            };

            const renderStars = (rating) => {
                return Array.from({ length: 5 }, (_, i) => (
                    <svg key={i} className={`w-4 h-4 ${i < rating ? 'text-yellow-400' : 'text-gray-300'}`} fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                    </svg>
                ));
            };

            const accesoUniversal = clinicsData.filter(c => c.acceso);
            const atencionFamiliar = clinicsData.filter(c => c.familia);
            const ortodoncia = clinicsData.filter(c => c.ortodoncia);
            const urgencias = clinicsData.filter(c => c.urgencias);

            const itemsPerPage = 10;
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentClinics = clinicsData.slice(startIndex, endIndex);
            const totalPages = Math.ceil(clinicsData.length / itemsPerPage);

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <h1 className="text-5xl font-bold mb-4">ü¶∑ Ranking Cl√≠nicas Dentales</h1>
                            <h2 className="text-3xl mb-6">Concepci√≥n, Chile</h2>
                            <div className="bg-white bg-opacity-20 rounded-lg p-6 inline-block">
                                <p className="text-xl font-semibold">üìÖ Fecha de corte: 20/09/2025</p>
                                <p className="text-xl font-semibold">üîÑ Pr√≥xima actualizaci√≥n: 12/10/2025</p>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-4 py-8">
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h3 className="text-2xl font-bold mb-4 text-gray-800">üìä Metodolog√≠a de Ranking</h3>
                            <p className="text-gray-600 text-lg mb-4">
                                Este ranking utiliza un <strong>sistema bayesiano</strong> que combina la valoraci√≥n promedio de Google Maps 
                                con el n√∫mero total de rese√±as, aplicando un factor de correcci√≥n que favorece tanto la calidad como la cantidad de opiniones.
                            </p>
                            <div className="bg-green-50 border-l-4 border-green-400 p-4 mb-6">
                                <p className="text-green-800">
                                    <strong>üîÑ Datos en tiempo real:</strong> No almacenamos datos de Google Maps. El c√°lculo se realiza 
                                    directamente en la fecha de actualizaci√≥n del ranking o en el momento en que solicitas tu informe, 
                                    garantizando que la informaci√≥n sea siempre fresca y actualizada.
                                </p>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-lg">
                                    <div className="flex items-center space-x-2">
                                        <span className="text-2xl">üèÜ</span>
                                        <div>
                                            <p className="font-bold text-lg">NUEVO L√çDER</p>
                                            <p className="text-sm">Cl√≠nica Dental Brelo (#3 ‚Üí #1)</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg">
                                    <div className="flex items-center space-x-2">
                                        <span className="text-2xl">üìà</span>
                                        <div>
                                            <p className="font-bold text-lg">MAYOR ASCENSO</p>
                                            <p className="text-sm">ALICURA (+7 posiciones)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-blue-50 border-l-4 border-blue-400 p-4">
                                <p className="text-blue-800">
                                    <strong>üîÑ Actualizaci√≥n Septiembre 2025:</strong> El ranking muestra movimientos significativos 
                                    manteniendo las mismas 20 cl√≠nicas de √©lite, con reordenamiento basado en el desempe√±o del √∫ltimo mes.
                                </p>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div className="bg-white p-6 rounded-xl shadow-lg text-center">
                                <div className="text-4xl font-bold text-blue-600 mb-2">160</div>
                                <div className="text-gray-600 font-medium">Cl√≠nicas Analizadas</div>
                            </div>
                            <div className="bg-white p-6 rounded-xl shadow-lg text-center">
                                <div className="text-4xl font-bold text-green-600 mb-2">4,265</div>
                                <div className="text-gray-600 font-medium">Total Reviews</div>
                            </div>
                            <div className="bg-white p-6 rounded-xl shadow-lg text-center">
                                <div className="text-4xl font-bold text-yellow-600 mb-2">4.9</div>
                                <div className="text-gray-600 font-medium">Rating Promedio</div>
                            </div>
                            <div className="bg-white p-6 rounded-xl shadow-lg text-center">
                                <div className="text-4xl font-bold text-purple-600 mb-2">4.906</div>
                                <div className="text-gray-600 font-medium">Score M√°ximo</div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
                            <div className="bg-gradient-to-r from-gray-800 to-gray-900 text-white p-6">
                                <h3 className="text-2xl font-bold">üèÜ TOP 20 Cl√≠nicas Dentales</h3>
                                <p className="text-gray-300">Ranking basado en an√°lisis bayesiano</p>
                            </div>
                            
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead className="bg-gray-100">
                                        <tr>
                                            <th className="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">Rank</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">Cl√≠nica</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider">Rating</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider">Reviews</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider">Score</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider">Cambio</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider">Acci√≥n</th>
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-gray-200">
                                        {currentClinics.map((clinic) => {
                                            const changeInfo = getChangeIndicator(clinic.rank);
                                            return (
                                                <tr key={clinic.id} className="hover:bg-gray-50 transition-colors duration-200">
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        <div className="flex items-center space-x-2">
                                                            <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg ${getRankColor(clinic.rank)}`}>
                                                                {clinic.rank}
                                                            </div>
                                                            {clinic.rank === 1 && (
                                                                <div className="bg-yellow-100 border border-yellow-300 rounded-full px-2 py-1">
                                                                    <span className="text-yellow-800 text-xs font-bold">NUEVO L√çDER</span>
                                                                </div>
                                                            )}
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4">
                                                        <div className="text-lg font-semibold text-gray-900">{clinic.name}</div>
                                                        <div className="text-sm text-gray-500">{clinic.direccion}</div>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        <div className="flex items-center justify-center mb-1">
                                                            {renderStars(clinic.rating)}
                                                        </div>
                                                        <div className="text-lg font-semibold text-gray-900">{clinic.rating}</div>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        <div className="text-2xl font-bold text-blue-600">{clinic.reviews}</div>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-lg font-bold">
                                                            {clinic.score}
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        <div className="flex items-center justify-center space-x-1">
                                                            <div className={`${changeInfo.color} text-white px-2 py-1 rounded-full text-sm font-bold flex items-center space-x-1`}>
                                                                <span>{changeInfo.icon}</span>
                                                                <span>{changeInfo.text}</span>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        <button 
                                                            onClick={() => {
                                                                setSelectedClinic(clinic);
                                                                setShowClinicModal(true);
                                                            }}
                                                            className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200"
                                                        >
                                                            Ver
                                                        </button>
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>

                            <div className="bg-gray-50 px-6 py-4 flex items-center justify-between">
                                <button 
                                    onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}
                                    disabled={currentPage === 1}
                                    className={`px-4 py-2 rounded-lg font-medium ${currentPage === 1 ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`}
                                >
                                    Anterior
                                </button>
                                <span className="text-gray-700 font-medium">
                                    P√°gina {currentPage} de {totalPages}
                                </span>
                                <button 
                                    onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}
                                    disabled={currentPage === totalPages}
                                    className={`px-4 py-2 rounded-lg font-medium ${currentPage === totalPages ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`}
                                >
                                    Siguiente
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                                <div className="bg-blue-600 text-white p-4">
                                    <h4 className="text-xl font-bold flex items-center">
                                        <span className="mr-2">‚ôø</span>
                                        Acceso Universal ({accesoUniversal.length})
                                    </h4>
                                </div>
                                <div className="max-h-80 overflow-y-auto">
                                    {accesoUniversal.slice(0, 12).map(clinic => (
                                        <div key={clinic.id} className="flex justify-between items-center p-4 border-b border-gray-100 hover:bg-blue-50 transition-colors">
                                            <div>
                                                <div className="font-semibold text-gray-900">{clinic.name}</div>
                                                <div className="text-sm text-gray-500">Score: {clinic.score}</div>
                                            </div>
                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${getRankColor(clinic.rank)}`}>
                                                {clinic.rank}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                                <div className="bg-green-600 text-white p-4">
                                    <h4 className="text-xl font-bold flex items-center">
                                        <span className="mr-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                                        Atenci√≥n Familiar ({atencionFamiliar.length})
                                    </h4>
                                </div>
                                <div className="max-h-80 overflow-y-auto">
                                    {atencionFamiliar.slice(0, 8).map(clinic => (
                                        <div key={clinic.id} className="flex justify-between items-center p-4 border-b border-gray-100 hover:bg-green-50 transition-colors">
                                            <div>
                                                <div className="font-semibold text-gray-900">{clinic.name}</div>
                                                <div className="text-sm text-gray-500">Score: {clinic.score}</div>
                                            </div>
                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${getRankColor(clinic.rank)}`}>
                                                {clinic.rank}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                                <div className="bg-purple-600 text-white p-4">
                                    <h4 className="text-xl font-bold flex items-center">
                                        <span className="mr-2">ü¶∑</span>
                                        Ortodoncia ({ortodoncia.length})
                                    </h4>
                                </div>
                                <div className="max-h-80 overflow-y-auto">
                                    {ortodoncia.slice(0, 14).map(clinic => (
                                        <div key={clinic.id} className="flex justify-between items-center p-4 border-b border-gray-100 hover:bg-purple-50 transition-colors">
                                            <div>
                                                <div className="font-semibold text-gray-900">{clinic.name}</div>
                                                <div className="text-sm text-gray-500">Score: {clinic.score}</div>
                                            </div>
                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${getRankColor(clinic.rank)}`}>
                                                {clinic.rank}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                                <div className="bg-red-600 text-white p-4">
                                    <h4 className="text-xl font-bold flex items-center">
                                        <span className="mr-2">üö®</span>
                                        Urgencias ({urgencias.length})
                                    </h4>
                                </div>
                                <div className="max-h-80 overflow-y-auto">
                                    {urgencias.slice(0, 10).map(clinic => (
                                        <div key={clinic.id} className="flex justify-between items-center p-4 border-b border-gray-100 hover:bg-red-50 transition-colors">
                                            <div>
                                                <div className="font-semibold text-gray-900">{clinic.name}</div>
                                                <div className="text-sm text-gray-500">Score: {clinic.score}</div>
                                            </div>
                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${getRankColor(clinic.rank)}`}>
                                                {clinic.rank}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
                            <div className="bg-gradient-to-r from-gray-700 to-gray-800 text-white p-6">
                                <h3 className="text-2xl font-bold">üïí Horarios de Atenci√≥n</h3>
                                <p className="text-gray-300">Informaci√≥n detallada de horarios</p>
                            </div>
                            
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead className="bg-gray-100">
                                        <tr>
                                            <th className="px-6 py-4 text-left text-sm font-semibold text-gray-700">Cl√≠nica</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700">Lunes-Viernes</th>
                                            <th className="px-6 py-4 text-center text-sm font-semibold text-gray-700">S√°bados</th>
                                            <th className="px-6 py-4 text-left text-sm font-semibold text-gray-700">Direcci√≥n</th>
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-gray-200">
                                        {currentClinics.map((clinic) => (
                                            <tr key={clinic.id} className="hover:bg-gray-50">
                                                <td className="px-6 py-4">
                                                    <div className="font-semibold text-gray-900">{clinic.name}</div>
                                                    <div className="text-sm text-gray-500">Ranking #{clinic.rank}</div>
                                                </td>
                                                <td className="px-6 py-4 text-center">
                                                    <div className="text-gray-900 font-medium">{clinic.horario}</div>
                                                </td>
                                                <td className="px-6 py-4 text-center">
                                                    <div className={`font-medium ${clinic.sabado === 'cerrado' ? 'text-red-600' : 'text-green-600'}`}>
                                                        {clinic.sabado}
                                                    </div>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <div className="text-gray-900">{clinic.direccion}</div>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-xl p-10 text-center mb-8">
                            <h3 className="text-3xl font-bold mb-6">Del ranking a la acci√≥n</h3>
                            <p className="text-xl mb-8 max-w-4xl mx-auto">
                                Identificamos qu√© te frena, d√≥nde est√° tu oportunidad y c√≥mo subir puestos. Comparativa con tu competencia usando m√°s de 4 mil rese√±as y ajuste bayesiano para una comparaci√≥n m√°s justa.
                            </p>
                            
                            <div className="max-w-xl mx-auto">
                                <div className="bg-white bg-opacity-10 backdrop-blur rounded-xl p-8">
                                    <h4 className="text-2xl font-bold mb-4">üìä Informe de Validaci√≥n Premium</h4>
                                    <div className="mb-4">
                                        <p className="text-2xl line-through opacity-60 mb-2">$49.999</p>
                                        <p className="text-5xl font-bold mb-2">$19.999</p>
                                        <p className="text-lg bg-yellow-400 text-blue-900 inline-block px-4 py-2 rounded-full font-bold">üéâ Precio de lanzamiento</p>
                                    </div>
                                    <p className="text-lg mb-6">An√°lisis cient√≠fico completo + benchmarking competitivo + recomendaciones personalizadas</p>
                                    <button 
                                        onClick={() => {
                                            setReportType('completo');
                                            setShowContactForm(true);
                                        }}
                                        className="bg-yellow-400 text-blue-900 px-8 py-4 rounded-xl font-bold text-lg hover:bg-yellow-300 transition-colors duration-200 w-full"
                                    >
                                        Solicitar Informe Premium
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {showClinicModal && selectedClinic && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-xl max-w-lg w-full p-8 max-h-screen overflow-y-auto">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className="text-2xl font-bold text-gray-900">{selectedClinic.name}</h3>
                                    <button 
                                        onClick={() => setShowClinicModal(false)}
                                        className="text-gray-500 hover:text-gray-700 text-3xl font-bold"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div className="flex items-center space-x-3">
                                        <span className="text-xl">üèÜ</span>
                                        <span className="font-semibold text-lg">Ranking:</span>
                                        <span className={`px-3 py-1 rounded-full text-white font-bold text-lg ${getRankColor(selectedClinic.rank)}`}>
                                            #{selectedClinic.rank}
                                        </span>
                                    </div>
                                    
                                    <div className="flex items-center space-x-3">
                                        <span className="text-xl">‚≠ê</span>
                                        <span className="font-semibold text-lg">Rating:</span>
                                        <div className="flex items-center space-x-2">
                                            <div className="flex">{renderStars(selectedClinic.rating)}</div>
                                            <span className="text-lg font-medium">{selectedClinic.rating} ({selectedClinic.reviews} rese√±as)</span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div className="flex items-center space-x-3 mb-2">
                                            <span className="text-xl">üìç</span>
                                            <span className="font-semibold text-lg">Direcci√≥n:</span>
                                        </div>
                                        <p className="text-gray-700 ml-8">{selectedClinic.direccion}</p>
                                    </div>
                                    
                                    <div>
                                        <div className="flex items-center space-x-3 mb-2">
                                            <span className="text-xl">üïí</span>
                                            <span className="font-semibold text-lg">Horarios:</span>
                                        </div>
                                        <div className="ml-8 space-y-1">
                                            <p className="text-gray-700"><strong>L-V:</strong> {selectedClinic.horario}</p>
                                            <p className="text-gray-700"><strong>S√°bado:</strong> {selectedClinic.sabado}</p>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div className="flex items-center space-x-3 mb-3">
                                            <span className="text-xl">üè•</span>
                                            <span className="font-semibold text-lg">Servicios:</span>
                                        </div>
                                        <div className="flex flex-wrap gap-2 ml-8">
                                            {selectedClinic.acceso && <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">Acceso Universal</span>}
                                            {selectedClinic.familia && <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Atenci√≥n Familiar</span>}
                                            {selectedClinic.ortodoncia && <span className="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">Ortodoncia</span>}
                                            {selectedClinic.urgencias && <span className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Urgencias</span>}
                                        </div>
                                    </div>
                                    
                                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                        <div className="flex items-center space-x-3">
                                            <span className="text-xl">üéØ</span>
                                            <span className="font-semibold text-lg">Score Bayesiano:</span>
                                            <span className="text-2xl font-bold text-yellow-600">{selectedClinic.score}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="mt-8 space-y-4">
                                    <button 
                                        onClick={() => {
                                            setReportType('completo');
                                            setShowClinicModal(false);
                                            setShowContactForm(true);
                                        }}
                                        className="w-full bg-yellow-500 text-white py-3 rounded-lg font-semibold text-lg hover:bg-yellow-600 transition-colors"
                                    >
                                        Solicitar Informe Premium ($19.999)
                                    </button>
                                    <p className="text-center text-sm text-gray-500">
                                        <span className="line-through">Precio regular: $49.999</span> - üéâ Precio de lanzamiento
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {showContactForm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-xl max-w-md w-full p-8">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className="text-2xl font-bold text-gray-900">
                                        Solicitar Informe Premium
                                    </h3>
                                    <button 
                                        onClick={() => {
                                            setShowContactForm(false);
                                            setReportType('');
                                        }}
                                        className="text-gray-500 hover:text-gray-700 text-3xl font-bold"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="mb-6 p-4 bg-blue-50 rounded-lg">
                                    <p className="text-sm text-blue-800">
                                        <strong>Precio:</strong> <span className="line-through opacity-60">$49.999</span> <span className="text-lg font-bold">$19.999</span> üéâ<br/>
                                        <strong className="text-green-700">Precio de lanzamiento</strong><br/>
                                        <strong>Incluye:</strong> An√°lisis cient√≠fico completo + benchmarking + recomendaciones<br/>
                                        <strong>Entrega:</strong> 24-48 horas<br/>
                                        <strong>Contacto:</strong> WhatsApp
                                    </p>
                                </div>
                                
                                <form onSubmit={handleContactSubmit} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Nombre completo *</label>
                                        <input 
                                            type="text"
                                            value={contactData.name}
                                            onChange={(e) => setContactData({...contactData, name: e.target.value})}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                                        <input 
                                            type="email"
                                            value={contactData.email}
                                            onChange={(e) => setContactData({...contactData, email: e.target.value})}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">WhatsApp *</label>
                                        <input 
                                            type="tel"
                                            value={contactData.whatsapp}
                                            onChange={(e) => setContactData({...contactData, whatsapp: e.target.value})}
                                            placeholder="+56 9 1234 5678"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Cl√≠nica de inter√©s (opcional)</label>
                                        <input 
                                            type="text"
                                            value={contactData.clinicName}
                                            onChange={(e) => setContactData({...contactData, clinicName: e.target.value})}
                                            placeholder="Ingresa cualquier cl√≠nica de Concepci√≥n"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    
                                    <button 
                                        type="submit"
                                        disabled={!contactData.name || !contactData.email || !contactData.whatsapp}
                                        className="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                                    >
                                        Enviar Solicitud
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    <footer className="bg-gray-900 text-white py-12">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <p className="text-lg text-gray-300 mb-2">
                                üìä Ranking basado en an√°lisis bayesiano de rese√±as de Google Maps
                            </p>
                            <p className="text-gray-400">
                                Fecha de corte: 20/09/2025 | Pr√≥xima actualizaci√≥n: 12/10/2025
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>

    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://dental-conce.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
