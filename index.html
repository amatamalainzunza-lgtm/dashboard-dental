<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking Cl√≠nicas Dentales Concepci√≥n</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif;
        }
        /* Mejoras para scroll horizontal en m√≥viles */
        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        /* Estilos para modal responsivo */
        .modal-content {
            max-height: 90vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function Dashboard() {
            const [showContactForm, setShowContactForm] = useState(false);
            const [reportType, setReportType] = useState('');
            const [selectedClinic, setSelectedClinic] = useState(null);
            const [showClinicModal, setShowClinicModal] = useState(false);
            const [contactData, setContactData] = useState({ name: '', email: '', whatsapp: '', clinicName: '' });
            const [currentPage, setCurrentPage] = useState(1);

            const clinicsData = [
                { id: 1, name: "Cl√≠nica Dental San Mart√≠n", rating: 5.0, reviews: 106, score: 4.890, rank: 1, acceso: true, familia: true, ortodoncia: true, urgencias: true, horario: "08:30 - 19:30", sabado: "09:00 - 14:00", direccion: "San Mart√≠n 450" },
                { id: 2, name: "Cl√≠nica Bio Bio Dental", rating: 5.0, reviews: 99, score: 4.884, rank: 2, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "O'Higgins Poniente 77" },
                { id: 3, name: "Cl√≠nica Dental Brelo - Concepci√≥n", rating: 4.9, reviews: 256, score: 4.858, rank: 3, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "Cochrane 844" },
                { id: 4, name: "Dra. Gabi Ib√°√±ez", rating: 5.0, reviews: 55, score: 4.824, rank: 4, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Lincoy√°n 444, Of. 313" },
                { id: 5, name: "M√ºnzenmayer Odontolog√≠a", rating: 5.0, reviews: 49, score: 4.810, rank: 5, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "09:30 - 19:00", sabado: "cerrado", direccion: "Anibal Pinto 131" },
                { id: 6, name: "CentroDent", rating: 4.9, reviews: 104, score: 4.810, rank: 6, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:30 - 17:30", sabado: "cerrado", direccion: "Rengo 193, 2¬∫ piso" },
                { id: 7, name: "Hola Dental Concepci√≥n", rating: 4.9, reviews: 96, score: 4.805, rank: 7, acceso: true, familia: false, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "09:00 - 13:00", direccion: "Tucapel 240" },
                { id: 8, name: "KAI Estudio Dental", rating: 5.0, reviews: 47, score: 4.805, rank: 8, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "09:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Rengo 94, oficina 51" },
                { id: 9, name: "Dra Carolina Weason", rating: 5.0, reviews: 47, score: 4.805, rank: 9, acceso: false, familia: false, ortodoncia: false, urgencias: false, horario: "no informado", sabado: "no informado", direccion: "Lord Cochrane 815" },
                { id: 10, name: "Clinica A+ Salud", rating: 5.0, reviews: 47, score: 4.805, rank: 10, acceso: true, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 17:00", direccion: "San Mart√≠n 654, Of. 31" },
                { id: 11, name: "VR Cl√≠nica dental", rating: 5.0, reviews: 43, score: 4.795, rank: 11, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "no informado", sabado: "no informado", direccion: "Angol 436, Of. 402" },
                { id: 12, name: "Cl√≠nica dental Experiencia Bliss", rating: 4.9, reviews: 76, score: 4.787, rank: 12, acceso: false, familia: false, ortodoncia: true, urgencias: true, horario: "09:30 - 20:30", sabado: "10:30 - 14:00", direccion: "Marina de Chile 2889" },
                { id: 13, name: "Cl√≠nica Origen", rating: 5.0, reviews: 38, score: 4.779, rank: 13, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "10:00 - 19:00", sabado: "10:00 - 14:00", direccion: "Cochrane 635, Torre B" },
                { id: 14, name: "Cl√≠nica KDENT", rating: 5.0, reviews: 34, score: 4.766, rank: 14, acceso: true, familia: true, ortodoncia: false, urgencias: true, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "O'Higgins 630, Of. 403" },
                { id: 15, name: "Dr. Pablo Cerda Ortodoncia", rating: 4.9, reviews: 58, score: 4.764, rank: 15, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "cerrado", direccion: "Barros Arana 162" },
                { id: 16, name: "CLINICA DENTAL ALICURA o'higgins", rating: 4.8, reviews: 167, score: 4.754, rank: 16, acceso: true, familia: false, ortodoncia: true, urgencias: true, horario: "08:30 - 19:00", sabado: "09:00 - 14:00", direccion: "Av. O'Higgins 1628" },
                { id: 17, name: "Dra Katherine Adasme", rating: 5.0, reviews: 29, score: 4.746, rank: 17, acceso: true, familia: false, ortodoncia: false, urgencias: false, horario: "09:00 - 20:00", sabado: "09:00 - 20:00", direccion: "Rengo 94, Oficina 41" },
                { id: 18, name: "Doctor Ortodoncia CDO", rating: 4.9, reviews: 44, score: 4.738, rank: 18, acceso: false, familia: false, ortodoncia: true, urgencias: false, horario: "09:00 - 19:00", sabado: "09:00 - 14:00", direccion: "Barros Arana 492" },
                { id: 19, name: "Cl√≠nica Dental Uno Salud Angol", rating: 4.8, reviews: 105, score: 4.733, rank: 19, acceso: true, familia: true, ortodoncia: false, urgencias: false, horario: "08:30 - 20:00", sabado: "09:00 - 14:00", direccion: "Angol 518" },
                { id: 20, name: "Cl√≠nica Dental Mood", rating: 5.0, reviews: 25, score: 4.727, rank: 20, acceso: true, familia: true, ortodoncia: true, urgencias: false, horario: "09:00 - 20:00", sabado: "cerrado", direccion: "Cochrane 678" }
            ];

            const handleContactSubmit = async (e) => {
                e.preventDefault();
                
                const formData = {
                    timestamp: new Date().toISOString(),
                    name: contactData.name,
                    email: contactData.email,
                    whatsapp: contactData.whatsapp,
                    clinicName: contactData.clinicName || selectedClinic?.name || '',
                    reportType: reportType,
                    source: 'dashboard-responsive-oct2025'
                };

                try {
                    await fetch('https://script.google.com/macros/s/AKfycbyJMrK-cqWbo_bV5lTZloELoLIIqxdkzESTZZc2xfVFSATACIoTRRdELuaEnukVpmdP/exec', {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });
                    
                    alert(`¬°Solicitud enviada exitosamente!\n\nRecibir√°s tu Informe Premium en las pr√≥ximas 24 horas.\n\nTe contactaremos al WhatsApp: ${contactData.whatsapp}`);
                } catch (error) {
                    alert('Solicitud enviada. Te contactaremos pronto.');
                } finally {
                    setContactData({ name: '', email: '', whatsapp: '', clinicName: '' });
                    setShowContactForm(false);
                    setReportType('');
                }
            };

            const getRankColor = (rank) => {
                if (rank === 1) return 'bg-yellow-500';
                if (rank === 2) return 'bg-gray-400';
                if (rank === 3) return 'bg-amber-600';
                if (rank <= 10) return 'bg-blue-500';
                return 'bg-slate-400';
            };

            const getChangeIndicator = (rank) => {
                const changes = {
                    1: { type: 'up', from: 2, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    2: { type: 'up', from: 3, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    3: { type: 'down', from: 1, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-2' },
                    4: { type: 'up', from: 5, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    5: { type: 'up', from: 6, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    6: { type: 'up', from: 12, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+6' },
                    7: { type: 'down', from: 4, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-3' },
                    8: { type: 'down', from: 7, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    9: { type: 'up', from: 10, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+1' },
                    10: { type: 'up', from: 14, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+4' },
                    11: { type: 'same', color: 'bg-gray-400', icon: '‚û°Ô∏è', text: '=' },
                    12: { type: 'down', from: 9, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-3' },
                    13: { type: 'up', from: 15, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+2' },
                    14: { type: 'up', from: 18, color: 'bg-green-500', icon: '‚ÜóÔ∏è', text: '+4' },
                    15: { type: 'down', from: 13, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-2' },
                    16: { type: 'down', from: 8, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-8' },
                    17: { type: 'down', from: 16, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    18: { type: 'down', from: 17, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' },
                    19: { type: 'new', from: 21, color: 'bg-blue-500', icon: 'üÜï', text: 'NEW' },
                    20: { type: 'down', from: 19, color: 'bg-red-400', icon: '‚ÜòÔ∏è', text: '-1' }
                };
                
                return changes[rank] || { type: 'same', color: 'bg-gray-400', icon: '‚û°Ô∏è', text: '=' };
            };

            const renderStars = (rating) => {
                return Array.from({ length: 5 }, (_, i) => (
                    <svg key={i} className={`w-3 h-3 sm:w-4 sm:h-4 ${i < rating ? 'text-yellow-400' : 'text-gray-300'}`} fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                    </svg>
                ));
            };

            const accesoUniversal = clinicsData.filter(c => c.acceso);
            const atencionFamiliar = clinicsData.filter(c => c.familia);
            const ortodoncia = clinicsData.filter(c => c.ortodoncia);
            const urgencias = clinicsData.filter(c => c.urgencias);

            const itemsPerPage = 10;
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentClinics = clinicsData.slice(startIndex, endIndex);
            const totalPages = Math.ceil(clinicsData.length / itemsPerPage);

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* HEADER RESPONSIVO */}
                    <div className="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-8 sm:py-12 lg:py-16">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <h1 className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-2 sm:mb-4">ü¶∑ Ranking Cl√≠nicas Dentales</h1>
                            <h2 className="text-xl sm:text-2xl md:text-3xl mb-4 sm:mb-6">Concepci√≥n, Chile</h2>
                            <div className="bg-white bg-opacity-20 rounded-lg p-4 sm:p-6 inline-block">
                                <p className="text-sm sm:text-lg md:text-xl font-semibold">üìÖ Fecha de corte: 12/10/2025</p>
                                <p className="text-sm sm:text-lg md:text-xl font-semibold">üîÑ Pr√≥xima actualizaci√≥n: 09/11/2025</p>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-3 sm:px-4 py-4 sm:py-8">
                        {/* METODOLOG√çA - RESPONSIVO */}
                        <div className="bg-white rounded-xl shadow-lg p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8">
                            <h3 className="text-xl sm:text-2xl font-bold mb-3 sm:mb-4 text-gray-800">üìä Metodolog√≠a de Ranking</h3>
                            <p className="text-gray-600 text-sm sm:text-base lg:text-lg mb-4">
                                Este ranking utiliza un <strong>sistema bayesiano</strong> que combina la valoraci√≥n promedio de Google Maps 
                                con el n√∫mero total de rese√±as, aplicando un factor de correcci√≥n que favorece tanto la calidad como la cantidad de opiniones.
                            </p>
                            <div className="bg-green-50 border-l-4 border-green-400 p-3 sm:p-4 mb-4 sm:mb-6">
                                <p className="text-green-800 text-sm sm:text-base">
                                    <strong>üîÑ Datos en tiempo real:</strong> No almacenamos datos de Google Maps. El c√°lculo se realiza 
                                    directamente en la fecha de actualizaci√≥n del ranking o en el momento en que solicitas tu informe, 
                                    garantizando que la informaci√≥n sea siempre fresca y actualizada.
                                </p>
                            </div>
                            
                            {/* DESTACADOS - GRID RESPONSIVO */}
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6">
                                <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-3 sm:p-4 rounded-lg">
                                    <div className="flex items-center space-x-2">
                                        <span className="text-xl sm:text-2xl">üèÜ</span>
                                        <div>
                                            <p className="font-bold text-sm sm:text-base lg:text-lg">NUEVO L√çDER</p>
                                            <p className="text-xs sm:text-sm">Cl√≠nica Dental San Mart√≠n (#2 ‚Üí #1)</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-gradient-to-r from-green-500 to-green-600 text-white p-3 sm:p-4 rounded-lg">
                                    <div className="flex items-center space-x-2">
                                        <span className="text-xl sm:text-2xl">üìà</span>
                                        <div>
                                            <p className="font-bold text-sm sm:text-base lg:text-lg">MAYOR ASCENSO</p>
                                            <p className="text-xs sm:text-sm">CentroDent (+6 posiciones)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-blue-50 border-l-4 border-blue-400 p-3 sm:p-4">
                                <p className="text-blue-800 text-sm sm:text-base">
                                    <strong>üîÑ Actualizaci√≥n Octubre 2025:</strong> San Mart√≠n lidera con servicio completo. 
                                    CentroDent logra el mayor ascenso (+6). ALICURA registra el mayor descenso (-8). 
                                    üÜï <strong>Cl√≠nica Uno Salud Angol</strong> ingresa al TOP 20 en posici√≥n #19.
                                </p>
                            </div>
                        </div>

                        {/* ESTAD√çSTICAS - GRID RESPONSIVO */}
                        <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8">
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-lg text-center">
                                <div className="text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-600 mb-1 sm:mb-2">160</div>
                                <div className="text-xs sm:text-sm lg:text-base text-gray-600 font-medium">Cl√≠nicas Analizadas</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-lg text-center">
                                <div className="text-2xl sm:text-3xl lg:text-4xl font-bold text-green-600 mb-1 sm:mb-2">20</div>
                                <div className="text-xs sm:text-sm lg:text-base text-gray-600 font-medium">Top Ranking</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-lg text-center">
                                <div className="text-2xl sm:text-3xl lg:text-4xl font-bold text-purple-600 mb-1 sm:mb-2">4.8</div>
                                <div className="text-xs sm:text-sm lg:text-base text-gray-600 font-medium">Rating Promedio</div>
                            </div>
                            <div className="bg-white p-4 sm:p-6 rounded-xl shadow-lg text-center">
                                <div className="text-2xl sm:text-3xl lg:text-4xl font-bold text-orange-600 mb-1 sm:mb-2">2.5K+</div>
                                <div className="text-xs sm:text-sm lg:text-base text-gray-600 font-medium">Rese√±as Totales</div>
                            </div>
                        </div>

                        {/* SERVICIOS - GRID RESPONSIVO */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8">
                            <div className="bg-white p-4 sm:p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                                <div className="flex items-center mb-2 sm:mb-3">
                                    <span className="text-2xl sm:text-3xl mr-3">‚ôø</span>
                                    <div>
                                        <h4 className="font-bold text-sm sm:text-base text-gray-800">Acceso Universal</h4>
                                        <p className="text-xl sm:text-2xl font-bold text-blue-600">{accesoUniversal.length}</p>
                                    </div>
                                </div>
                                <p className="text-xs sm:text-sm text-gray-600">Cl√≠nicas con accesibilidad</p>
                            </div>
                            <div className="bg-white p-4 sm:p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                                <div className="flex items-center mb-2 sm:mb-3">
                                    <span className="text-2xl sm:text-3xl mr-3">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                                    <div>
                                        <h4 className="font-bold text-sm sm:text-base text-gray-800">Atenci√≥n Familiar</h4>
                                        <p className="text-xl sm:text-2xl font-bold text-green-600">{atencionFamiliar.length}</p>
                                    </div>
                                </div>
                                <p className="text-xs sm:text-sm text-gray-600">Atenci√≥n para toda la familia</p>
                            </div>
                            <div className="bg-white p-4 sm:p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                                <div className="flex items-center mb-2 sm:mb-3">
                                    <span className="text-2xl sm:text-3xl mr-3">ü¶∑</span>
                                    <div>
                                        <h4 className="font-bold text-sm sm:text-base text-gray-800">Ortodoncia</h4>
                                        <p className="text-xl sm:text-2xl font-bold text-purple-600">{ortodoncia.length}</p>
                                    </div>
                                </div>
                                <p className="text-xs sm:text-sm text-gray-600">Servicio de ortodoncia</p>
                            </div>
                            <div className="bg-white p-4 sm:p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
                                <div className="flex items-center mb-2 sm:mb-3">
                                    <span className="text-2xl sm:text-3xl mr-3">üö®</span>
                                    <div>
                                        <h4 className="font-bold text-sm sm:text-base text-gray-800">Urgencias</h4>
                                        <p className="text-xl sm:text-2xl font-bold text-red-600">{urgencias.length}</p>
                                    </div>
                                </div>
                                <p className="text-xs sm:text-sm text-gray-600">Atenci√≥n de urgencias</p>
                            </div>
                        </div>

                        {/* BOTONES DE INFORMES - RESPONSIVOS */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8">
                            <button
                                onClick={() => { setReportType('personal'); setShowContactForm(true); }}
                                className="bg-gradient-to-r from-blue-500 to-blue-700 text-white p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105"
                            >
                                <div className="flex flex-col items-center">
                                    <span className="text-3xl sm:text-4xl mb-2">üë§</span>
                                    <h3 className="text-lg sm:text-xl font-bold mb-2">Informe Personal</h3>
                                    <p className="text-xs sm:text-sm opacity-90 mb-2">Encuentra tu cl√≠nica ideal</p>
                                    <div className="text-base sm:text-lg">
                                        <span className="line-through opacity-60">$49.999</span> 
                                        <span className="font-bold ml-2">$19.999</span>
                                    </div>
                                </div>
                            </button>
                            
                            <button
                                onClick={() => { setReportType('clinic'); setShowContactForm(true); }}
                                className="bg-gradient-to-r from-purple-500 to-purple-700 text-white p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105"
                            >
                                <div className="flex flex-col items-center">
                                    <span className="text-3xl sm:text-4xl mb-2">üè•</span>
                                    <h3 className="text-lg sm:text-xl font-bold mb-2">Informe para Cl√≠nicas</h3>
                                    <p className="text-xs sm:text-sm opacity-90 mb-2">An√°lisis competitivo completo</p>
                                    <div className="text-base sm:text-lg">
                                        <span className="line-through opacity-60">$49.999</span> 
                                        <span className="font-bold ml-2">$19.999</span>
                                    </div>
                                </div>
                            </button>
                        </div>

                        {/* TABLA DE RANKING - RESPONSIVA */}
                        <div className="bg-white rounded-xl shadow-lg overflow-hidden mb-6 sm:mb-8">
                            <div className="p-4 sm:p-6 bg-gradient-to-r from-blue-600 to-blue-800 text-white">
                                <h2 className="text-xl sm:text-2xl lg:text-3xl font-bold text-center">üèÜ TOP 20 Cl√≠nicas Dentales</h2>
                            </div>
                            
                            {/* Vista m√≥vil: Cards */}
                            <div className="block lg:hidden">
                                {currentClinics.map((clinic) => {
                                    const change = getChangeIndicator(clinic.rank);
                                    return (
                                        <div 
                                            key={clinic.id} 
                                            className="border-b border-gray-200 p-4 hover:bg-gray-50 cursor-pointer"
                                            onClick={() => { setSelectedClinic(clinic); setShowClinicModal(true); }}
                                        >
                                            <div className="flex items-start justify-between mb-2">
                                                <div className="flex items-center gap-3">
                                                    <div className={`${getRankColor(clinic.rank)} text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0`}>
                                                        {clinic.rank}
                                                    </div>
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className="font-bold text-gray-800 text-sm sm:text-base break-words">{clinic.name}</h3>
                                                        <p className="text-xs text-gray-500">{clinic.direccion}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="flex items-center justify-between mt-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="flex">{renderStars(clinic.rating)}</div>
                                                    <span className="text-sm font-semibold text-gray-700">{clinic.rating}</span>
                                                    <span className="text-xs text-gray-500">({clinic.reviews})</span>
                                                </div>
                                                <div className={`${change.color} text-white px-2 py-1 rounded text-xs font-bold`}>
                                                    {change.icon} {change.text}
                                                </div>
                                            </div>
                                            
                                            <div className="flex flex-wrap gap-1 mt-2">
                                                {clinic.acceso && <span className="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">‚ôø Acceso</span>}
                                                {clinic.familia && <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familia</span>}
                                                {clinic.ortodoncia && <span className="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">ü¶∑ Ortodoncia</span>}
                                                {clinic.urgencias && <span className="text-xs bg-red-100 text-red-800 px-2 py-1 rounded">üö® Urgencias</span>}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* Vista desktop: Tabla */}
                            <div className="hidden lg:block table-scroll">
                                <table className="w-full">
                                    <thead className="bg-gray-50">
                                        <tr>
                                            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Rank</th>
                                            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Cl√≠nica</th>
                                            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Rating</th>
                                            <th className="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase">Rese√±as</th>
                                            <th className="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase">Score</th>
                                            <th className="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase">Cambio</th>
                                            <th className="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase">Servicios</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-200">
                                        {currentClinics.map((clinic) => {
                                            const change = getChangeIndicator(clinic.rank);
                                            return (
                                                <tr 
                                                    key={clinic.id} 
                                                    className="hover:bg-gray-50 cursor-pointer transition-colors"
                                                    onClick={() => { setSelectedClinic(clinic); setShowClinicModal(true); }}
                                                >
                                                    <td className="px-4 py-4">
                                                        <div className={`${getRankColor(clinic.rank)} text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg`}>
                                                            {clinic.rank}
                                                        </div>
                                                    </td>
                                                    <td className="px-4 py-4">
                                                        <div className="font-semibold text-gray-800">{clinic.name}</div>
                                                        <div className="text-sm text-gray-500">{clinic.direccion}</div>
                                                    </td>
                                                    <td className="px-4 py-4">
                                                        <div className="flex items-center gap-2">
                                                            <div className="flex">{renderStars(clinic.rating)}</div>
                                                            <span className="font-semibold text-gray-700">{clinic.rating}</span>
                                                        </div>
                                                    </td>
                                                    <td className="px-4 py-4 text-center">
                                                        <span className="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">
                                                            {clinic.reviews}
                                                        </span>
                                                    </td>
                                                    <td className="px-4 py-4 text-center">
                                                        <span className="font-mono text-sm font-bold text-gray-700">{clinic.score.toFixed(3)}</span>
                                                    </td>
                                                    <td className="px-4 py-4 text-center">
                                                        <span className={`${change.color} text-white px-3 py-1 rounded-full text-sm font-bold inline-flex items-center gap-1`}>
                                                            {change.icon} {change.text}
                                                        </span>
                                                    </td>
                                                    <td className="px-4 py-4">
                                                        <div className="flex flex-wrap gap-1 justify-center">
                                                            {clinic.acceso && <span className="text-xl" title="Acceso universal">‚ôø</span>}
                                                            {clinic.familia && <span className="text-xl" title="Atenci√≥n familiar">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>}
                                                            {clinic.ortodoncia && <span className="text-xl" title="Ortodoncia">ü¶∑</span>}
                                                            {clinic.urgencias && <span className="text-xl" title="Urgencias">üö®</span>}
                                                        </div>
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {/* PAGINACI√ìN - RESPONSIVA */}
                        <div className="flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4 mb-8">
                            <button
                                onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
                                disabled={currentPage === 1}
                                className="w-full sm:w-auto bg-blue-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors"
                            >
                                ‚Üê Anterior
                            </button>
                            <div className="flex items-center gap-2">
                                <span className="text-sm sm:text-base text-gray-700">P√°gina</span>
                                <span className="bg-blue-600 text-white w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-sm sm:text-base">
                                    {currentPage}
                                </span>
                                <span className="text-sm sm:text-base text-gray-700">de {totalPages}</span>
                            </div>
                            <button
                                onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
                                disabled={currentPage === totalPages}
                                className="w-full sm:w-auto bg-blue-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors"
                            >
                                Siguiente ‚Üí
                            </button>
                        </div>
                    </div>

                    {/* MODAL DE CL√çNICA - RESPONSIVO */}
                    {showClinicModal && selectedClinic && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onClick={() => setShowClinicModal(false)}>
                            <div className="bg-white rounded-xl max-w-2xl w-full modal-content p-4 sm:p-6" onClick={(e) => e.stopPropagation()}>
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <div className={`${getRankColor(selectedClinic.rank)} text-white w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center font-bold text-xl sm:text-2xl mb-2`}>
                                            #{selectedClinic.rank}
                                        </div>
                                        <h2 className="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800">{selectedClinic.name}</h2>
                                    </div>
                                    <button 
                                        onClick={() => setShowClinicModal(false)}
                                        className="text-gray-500 hover:text-gray-700 text-3xl sm:text-4xl font-bold leading-none"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div className="flex items-center gap-2 sm:gap-3">
                                        <div className="flex">{renderStars(selectedClinic.rating)}</div>
                                        <span className="text-lg sm:text-xl font-bold text-gray-700">{selectedClinic.rating}</span>
                                        <span className="text-sm sm:text-base text-gray-500">({selectedClinic.reviews} rese√±as)</span>
                                    </div>
                                    
                                    <div className="bg-gray-50 p-3 sm:p-4 rounded-lg">
                                        <p className="text-sm sm:text-base"><strong>üìç Direcci√≥n:</strong> {selectedClinic.direccion}</p>
                                        <p className="text-sm sm:text-base mt-2"><strong>üïê Horario:</strong> {selectedClinic.horario}</p>
                                        <p className="text-sm sm:text-base mt-2"><strong>üìÖ S√°bados:</strong> {selectedClinic.sabado}</p>
                                    </div>
                                    
                                    <div>
                                        <h3 className="font-bold text-base sm:text-lg mb-2">Servicios disponibles:</h3>
                                        <div className="flex flex-wrap gap-2">
                                            {selectedClinic.acceso && <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">‚ôø Acceso Universal</span>}
                                            {selectedClinic.familia && <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Atenci√≥n Familiar</span>}
                                            {selectedClinic.ortodoncia && <span className="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">ü¶∑ Ortodoncia</span>}
                                            {selectedClinic.urgencias && <span className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">üö® Urgencias</span>}
                                        </div>
                                    </div>
                                    
                                    <button
                                        onClick={() => {
                                            setShowClinicModal(false);
                                            setReportType('clinic');
                                            setShowContactForm(true);
                                        }}
                                        className="w-full bg-gradient-to-r from-purple-500 to-purple-700 text-white py-3 sm:py-4 rounded-lg font-bold text-base sm:text-lg hover:from-purple-600 hover:to-purple-800 transition-all"
                                    >
                                        üìä Solicitar An√°lisis Competitivo
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL DE CONTACTO - RESPONSIVO */}
                    {showContactForm && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onClick={() => setShowContactForm(false)}>
                            <div className="bg-white rounded-xl max-w-lg w-full modal-content p-4 sm:p-6" onClick={(e) => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4 sm:mb-6">
                                    <h3 className="text-xl sm:text-2xl font-bold text-gray-800">
                                        Solicitar Informe Premium
                                    </h3>
                                    <button 
                                        onClick={() => {
                                            setShowContactForm(false);
                                            setReportType('');
                                        }}
                                        className="text-gray-500 hover:text-gray-700 text-3xl font-bold"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 rounded-lg">
                                    <p className="text-xs sm:text-sm text-blue-800">
                                        <strong>Precio:</strong> <span className="line-through opacity-60">$49.999</span> <span className="text-base sm:text-lg font-bold">$19.999</span> üéâ<br/>
                                        <strong className="text-green-700">Precio de lanzamiento</strong><br/>
                                        <strong>Incluye:</strong> An√°lisis cient√≠fico completo + benchmarking + recomendaciones<br/>
                                        <strong>Entrega:</strong> 24-48 horas<br/>
                                        <strong>Contacto:</strong> WhatsApp
                                    </p>
                                </div>
                                
                                <form onSubmit={handleContactSubmit} className="space-y-3 sm:space-y-4">
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Nombre completo *</label>
                                        <input 
                                            type="text"
                                            value={contactData.name}
                                            onChange={(e) => setContactData({...contactData, name: e.target.value})}
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                                        <input 
                                            type="email"
                                            value={contactData.email}
                                            onChange={(e) => setContactData({...contactData, email: e.target.value})}
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">WhatsApp *</label>
                                        <input 
                                            type="tel"
                                            value={contactData.whatsapp}
                                            onChange={(e) => setContactData({...contactData, whatsapp: e.target.value})}
                                            placeholder="+56 9 1234 5678"
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Cl√≠nica de inter√©s (opcional)</label>
                                        <input 
                                            type="text"
                                            value={contactData.clinicName}
                                            onChange={(e) => setContactData({...contactData, clinicName: e.target.value})}
                                            placeholder="Ingresa cualquier cl√≠nica de Concepci√≥n"
                                            className="w-full p-2 sm:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"
                                        />
                                    </div>
                                    
                                    <button 
                                        type="submit"
                                        disabled={!contactData.name || !contactData.email || !contactData.whatsapp}
                                        className="w-full bg-blue-600 text-white py-3 sm:py-4 rounded-lg font-bold text-base sm:text-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                                    >
                                        Enviar Solicitud
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* FOOTER - RESPONSIVO */}
                    <footer className="bg-gray-900 text-white py-8 sm:py-12">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <p className="text-base sm:text-lg text-gray-300 mb-2">
                                üìä Ranking basado en an√°lisis bayesiano de rese√±as de Google Maps
                            </p>
                            <p className="text-sm sm:text-base text-gray-400">
                                Fecha de corte: 12/10/2025 | Pr√≥xima actualizaci√≥n: 09/11/2025
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>

    <script data-goatcounter="https://dental-conce.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
